{"remainingRequest":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js!/Users/xujunjie/Documents/git/projectComponent/src/editForm/EditForm.tsx","dependencies":[{"path":"/Users/xujunjie/Documents/git/projectComponent/src/editForm/EditForm.tsx","mtime":1611497156919},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/cache-loader/dist/cjs.js","mtime":1609062632110},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js","mtime":1609062632658},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1609062558293},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js","mtime":1609062632650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiYW50ZC9lcy9idXR0b24vc3R5bGUvY3NzIjsKaW1wb3J0IF9CdXR0b24gZnJvbSAiYW50ZC9lcy9idXR0b24iOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L3NyYy9lZGl0Rm9ybS9FZGl0Rm9ybS50c3giOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCBGb3JtIGZyb20gJ2FudGQvbGliL2Zvcm0vRm9ybSc7CmltcG9ydCBMIGZyb20gJ2xvZGFzaCc7CmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBGb3JtVXRpbCBmcm9tICcuLi91dGlscy9Gb3JtVXRpbCc7CmltcG9ydCAnLi9FZGl0Rm9ybS5sZXNzJzsKCmlmICh0eXBlb2YgSUVkaXRGb3JtUHJvcHMgIT09ICd1bmRlZmluZWQnICYmIElFZGl0Rm9ybVByb3BzICYmIElFZGl0Rm9ybVByb3BzID09PSBPYmplY3QoSUVkaXRGb3JtUHJvcHMpICYmIE9iamVjdC5pc0V4dGVuc2libGUoSUVkaXRGb3JtUHJvcHMpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElFZGl0Rm9ybVByb3BzLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiSUVkaXRGb3JtUHJvcHMiLAogICAgICBmaWxlbmFtZTogInNyYy9lZGl0Rm9ybS9FZGl0Rm9ybS50c3giCiAgICB9CiAgfSk7Cn0KCi8qKgogKiDnvJbovpHooajljZXvvIzmlK/mjIHvvJrnvJbovpHvvIzpmIXor7vkuKTnp43mqKHlvI/vvJvkvJroh6rooYzliKTmlq3mmK/mlrDlop7ov5jmmK/kv67mlLkKICovCnZhciBFZGl0Rm9ybSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhFZGl0Rm9ybSwgX0NvbXBvbmVudCk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRWRpdEZvcm0pOwoKICBmdW5jdGlvbiBFZGl0Rm9ybShwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFZGl0Rm9ybSk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7CiAgICBfdGhpcy5mb3JtUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7CgogICAgX3RoaXMuZ2V0Q29udHJvbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGxvYWRpbmcgPSBfdGhpcy5zdGF0ZS5sb2FkaW5nOwoKICAgICAgaWYgKF90aGlzLnJlYWRPbmx5KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImZoQ29udHJvbEdyb3VwIiwKICAgICAgICBfX3NlbGY6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogMTc3LAogICAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChfQnV0dG9uLCB7CiAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgICAgaHRtbFR5cGU6ICJzdWJtaXQiLAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiAxNzgsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9CiAgICAgIH0sICJcdTRGRERcdTVCNTgiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoX0J1dHRvbiwgewogICAgICAgIGRpc2FibGVkOiBsb2FkaW5nLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICBfdGhpcy5jYW5jZWwoKTsKICAgICAgICB9LAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiAxODEsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9CiAgICAgIH0sICJcdTUzRDZcdTZEODgiKSk7CiAgICB9OwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhFZGl0Rm9ybSwgW3sKICAgIGtleTogInN1Ym1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICBpZiAodGhpcy5mb3JtUmVmLmN1cnJlbnQpIHsKICAgICAgICB0aGlzLmZvcm1SZWYuY3VycmVudC5zdWJtaXQoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNhbmNlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB2YXIgb25DYW5jZWwgPSB0aGlzLnByb3BzLm9uQ2FuY2VsOwoKICAgICAgaWYgKG9uQ2FuY2VsKSB7CiAgICAgICAgb25DYW5jZWwoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdGhpcy51cGRhdGVTdGF0ZVNvdXJjZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICBpZiAoIUwuaXNFcXVhbCh0aGlzLnByb3BzLnNvdXJjZSwgcHJldlByb3BzLnNvdXJjZSkpIHsKICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlU291cmNlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdGF0ZVNvdXJjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZVN0YXRlU291cmNlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMkcHJvcHMsIHNvdXJjZSwgZ2V0RGV0YWlsRnVuY3Rpb24sIGRhdGE7CgogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsIHNvdXJjZSA9IF90aGlzJHByb3BzLnNvdXJjZSwgZ2V0RGV0YWlsRnVuY3Rpb24gPSBfdGhpcyRwcm9wcy5nZXREZXRhaWxGdW5jdGlvbjsKCiAgICAgICAgICAgICAgICBpZiAoc291cmNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgc291cmNlOiB1bmRlZmluZWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghZ2V0RGV0YWlsRnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBnZXREZXRhaWxGdW5jdGlvbihzb3VyY2UpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBzb3VyY2U6IGRhdGEKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgc291cmNlOiBzb3VyY2UKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXRlU291cmNlKCkgewogICAgICAgIHJldHVybiBfdXBkYXRlU3RhdGVTb3VyY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwZGF0ZVN0YXRlU291cmNlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2V0TG9hZGluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TG9hZGluZyhsb2FkaW5nKSB7CiAgICAgIHZhciBvbkxvYWRpbmdDaGFuZ2UgPSB0aGlzLnByb3BzLm9uTG9hZGluZ0NoYW5nZTsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgbG9hZGluZzogbG9hZGluZwogICAgICB9KTsKCiAgICAgIGlmIChvbkxvYWRpbmdDaGFuZ2UpIHsKICAgICAgICBvbkxvYWRpbmdDaGFuZ2UobG9hZGluZyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlKHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBhZGRGdW5jdGlvbiA9IF90aGlzJHByb3BzMi5hZGRGdW5jdGlvbiwKICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uID0gX3RoaXMkcHJvcHMyLnVwZGF0ZUZ1bmN0aW9uLAogICAgICAgICAgb25PayA9IF90aGlzJHByb3BzMi5vbk9rLAogICAgICAgICAgb25FcnJvciA9IF90aGlzJHByb3BzMi5vbkVycm9yOwogICAgICB2YXIgc291cmNlID0gdGhpcy5zdGF0ZS5zb3VyY2U7CiAgICAgIHZhciBwcm9taXNlID0gbnVsbDsKCiAgICAgIGlmIChzb3VyY2UpIHsKICAgICAgICBpZiAodXBkYXRlRnVuY3Rpb24pIHsKICAgICAgICAgIHByb21pc2UgPSB1cGRhdGVGdW5jdGlvbih2YWx1ZSwgc291cmNlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGFkZEZ1bmN0aW9uKSB7CiAgICAgICAgICBwcm9taXNlID0gYWRkRnVuY3Rpb24odmFsdWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHByb21pc2UpIHsKICAgICAgICB0aGlzLnNldExvYWRpbmcodHJ1ZSk7CiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChvbk9rKSB7CiAgICAgICAgICAgIG9uT2soKTsKICAgICAgICAgIH0KICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGlmIChvbkVycm9yKSB7CiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0pWyJmaW5hbGx5Il0oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnNldExvYWRpbmcoZmFsc2UpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29udHJvbEZvcm1JdGVtTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udHJvbEZvcm1JdGVtTGlzdCgpIHsKICAgICAgaWYgKHRoaXMucmVhZE9ubHkpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHJldHVybiBbewogICAgICAgIHNwYW46IDI0LAogICAgICAgIGNvbnRlbnQ6IHRoaXMuZ2V0Q29udHJvbCgpCiAgICAgIH1dOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSB0aGlzLnByb3BzLAogICAgICAgICAgZm9ybUl0ZW1MaXN0ID0gX3RoaXMkcHJvcHMzLmZvcm1JdGVtTGlzdCwKICAgICAgICAgIF90aGlzJHByb3BzMyRjb2x1bW5zQyA9IF90aGlzJHByb3BzMy5jb2x1bW5zQ291bnQsCiAgICAgICAgICBjb2x1bW5zQ291bnQgPSBfdGhpcyRwcm9wczMkY29sdW1uc0MgPT09IHZvaWQgMCA/IDEgOiBfdGhpcyRwcm9wczMkY29sdW1uc0MsCiAgICAgICAgICBfdGhpcyRwcm9wczMka2V5ID0gX3RoaXMkcHJvcHMzLmtleSwKICAgICAgICAgIGtleSA9IF90aGlzJHByb3BzMyRrZXkgPT09IHZvaWQgMCA/ICdpZCcgOiBfdGhpcyRwcm9wczMka2V5LAogICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHMzLmNsYXNzTmFtZSwKICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHMzLnN0eWxlLAogICAgICAgICAgaGlkZUNvbnRyb2xzID0gX3RoaXMkcHJvcHMzLmhpZGVDb250cm9sczsKICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc3RhdGUuc291cmNlOwogICAgICB2YXIgY29udHJvbExpc3QgPSBoaWRlQ29udHJvbHMgPyBbXSA6IHRoaXMuZ2V0Q29udHJvbEZvcm1JdGVtTGlzdCgpOwogICAgICB2YXIgcmVhZE9ubHkgPSB0aGlzLnJlYWRPbmx5OwoKICAgICAgaWYgKHJlYWRPbmx5KSB7CiAgICAgICAgZm9ybUl0ZW1MaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLmNvbnRlbnQgJiYgUmVhY3QuaXNWYWxpZEVsZW1lbnQoaXRlbS5jb250ZW50KSkgewogICAgICAgICAgICBpdGVtLmNvbnRlbnQgPSBSZWFjdC5jbG9uZUVsZW1lbnQoaXRlbS5jb250ZW50LCB7CiAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImZoRWRpdEZvcm0iLAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDIyNSwKICAgICAgICAgIGNvbHVtbk51bWJlcjogNwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybSwgewogICAgICAgIHJlZjogdGhpcy5mb3JtUmVmLAogICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLAogICAgICAgIHN0eWxlOiBzdHlsZSwKICAgICAgICBrZXk6IHNvdXJjZSA/IHNvdXJjZVtrZXldIDogJycsCiAgICAgICAgaW5pdGlhbFZhbHVlczogc291cmNlLAogICAgICAgIG9uRmluaXNoOiBmdW5jdGlvbiBvbkZpbmlzaCh2YWx1ZSkgewogICAgICAgICAgX3RoaXMzLnNhdmUodmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogMjI2LAogICAgICAgICAgY29sdW1uTnVtYmVyOiA5CiAgICAgICAgfQogICAgICB9LCBGb3JtVXRpbC5yZW5kZXJGb3JtSXRlbXMoZm9ybUl0ZW1MaXN0LmNvbmNhdChjb250cm9sTGlzdCksIGNvbHVtbnNDb3VudCkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbCIsCiAgICAvLyBAdHMtaWdub3JlCiAgICB2YWx1ZTogZnVuY3Rpb24gX19yZWFjdHN0YW5kaW5fX3JlZ2VuZXJhdGVCeUV2YWwoa2V5LCBjb2RlKSB7CiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgdGhpc1trZXldID0gZXZhbChjb2RlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWFkT25seSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzNCA9IHRoaXMucHJvcHMsCiAgICAgICAgICBzb3VyY2UgPSBfdGhpcyRwcm9wczQuc291cmNlLAogICAgICAgICAgdXBkYXRlRnVuY3Rpb24gPSBfdGhpcyRwcm9wczQudXBkYXRlRnVuY3Rpb247CiAgICAgIHJldHVybiBzb3VyY2UgJiYgIXVwZGF0ZUZ1bmN0aW9uOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEVkaXRGb3JtOwp9KENvbXBvbmVudCk7Cgp2YXIgX2RlZmF1bHQgPSBFZGl0Rm9ybTsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CgppZiAodHlwZW9mIEVkaXRGb3JtICE9PSAndW5kZWZpbmVkJyAmJiBFZGl0Rm9ybSAmJiBFZGl0Rm9ybSA9PT0gT2JqZWN0KEVkaXRGb3JtKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKEVkaXRGb3JtKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFZGl0Rm9ybSwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkVkaXRGb3JtIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvZWRpdEZvcm0vRWRpdEZvcm0udHN4IgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihFZGl0Rm9ybSwgIkVkaXRGb3JtIiwgIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvc3JjL2VkaXRGb3JtL0VkaXRGb3JtLnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKF9kZWZhdWx0LCAiZGVmYXVsdCIsICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L3NyYy9lZGl0Rm9ybS9FZGl0Rm9ybS50c3giKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["/Users/xujunjie/Documents/git/projectComponent/src/editForm/EditForm.tsx"],"names":["Form","L","React","Component","FormUtil","EditForm","props","formRef","createRef","getControl","loading","state","readOnly","cancel","current","submit","onCancel","updateStateSource","prevProps","isEqual","source","getDetailFunction","setState","undefined","data","onLoadingChange","value","addFunction","updateFunction","onOk","onError","promise","setLoading","then","error","span","content","formItemList","columnsCount","key","className","style","hideControls","controlList","getControlFormItemList","forEach","item","isValidElement","cloneElement","disabled","save","renderFormItems","concat"],"mappings":"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","sourcesContent":["import { Button } from 'antd';\nimport Form, { FormInstance } from 'antd/lib/form/Form';\nimport { Store } from 'antd/lib/form/interface';\nimport L from 'lodash';\nimport React, { Component, ReactNode } from 'react';\nimport IComponentProps from '../interfaces/IComponentProps';\nimport IFormItemData from '../interfaces/IFormItemData';\nimport FormUtil from '../utils/FormUtil';\nimport './EditForm.less';\n\ninterface IEditFormState<T> {\n  loading: boolean;\n  source?: T;\n}\nexport interface IEditFormProps<T> extends IComponentProps {\n  /**\n   * 新增函数，then表示成功，catch表示异常\n   */\n  addFunction?: (value: Store) => Promise<any>;\n\n  /**\n   * 编辑函数，then表示成功，catch表示异常\n   */\n  updateFunction?: (value: Store, source: T) => Promise<any>;\n\n  /**\n   * 获取源数据完整信息的方法。\n   * 当props.source只是部分信息，而表单中需要展示完整信息时，需通过此方法获取完整数据\n   */\n  getDetailFunction?: (source: T) => Promise<T>;\n\n  /**\n   * 源数据，如果是“编辑模式”，且设置了“源数据”，保存时调用编辑函数\n   */\n  source?: T;\n\n  /**\n   * 表单项列表\n   */\n  formItemList: IFormItemData[];\n\n  /**\n   * 列数\n   */\n  columnsCount?: number;\n\n  /**\n   * 主键名称\n   */\n  key?: string;\n\n  /**\n   * 取消事件\n   */\n  onCancel?: () => void;\n\n  /**\n   * 保存成功事件\n   */\n  onOk?: () => void;\n\n  /**\n   * 保存出错的事件\n   */\n  onError?: (error: any) => void;\n\n  /**\n   * 是否隐藏操作按钮，如果设置为true，需自定义控制按钮\n   */\n  hideControls?: Boolean;\n\n  onLoadingChange?: (value: boolean) => void;\n}\n\n/**\n * 编辑表单，支持：编辑，阅读两种模式；会自行判断是新增还是修改\n */\nclass EditForm<T extends Store> extends Component<IEditFormProps<T>, IEditFormState<T>> {\n  private formRef = React.createRef<FormInstance>();\n\n  constructor(props: IEditFormProps<T>) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  public submit() {\n    if (this.formRef.current) {\n      this.formRef.current.submit();\n    }\n  }\n\n  public cancel() {\n    const { onCancel } = this.props;\n    if (onCancel) {\n      onCancel();\n    }\n  }\n\n  componentDidMount() {\n    this.updateStateSource();\n  }\n\n  componentDidUpdate(prevProps: IEditFormProps<T>) {\n    if (!L.isEqual(this.props.source, prevProps.source)) {\n      this.updateStateSource();\n    }\n  }\n\n  private async updateStateSource() {\n    const { source, getDetailFunction } = this.props;\n    if (!source) {\n      this.setState({ source: undefined });\n    } else if (getDetailFunction) {\n      const data = await getDetailFunction(source);\n      this.setState({ source: data });\n    } else {\n      this.setState({ source });\n    }\n  }\n\n  private setLoading(loading: boolean) {\n    const { onLoadingChange } = this.props;\n    this.setState({ loading });\n    if (onLoadingChange) {\n      onLoadingChange(loading);\n    }\n  }\n\n  private save(value: Store) {\n    const { addFunction, updateFunction, onOk, onError } = this.props;\n    const { source } = this.state;\n    let promise: Promise<any> | null = null;\n    if (source) {\n      if (updateFunction) {\n        promise = updateFunction(value, source);\n      }\n    } else {\n      if (addFunction) {\n        promise = addFunction(value);\n      }\n    }\n\n    if (promise) {\n      this.setLoading(true);\n      promise\n        .then(() => {\n          if (onOk) {\n            onOk();\n          }\n        })\n        .catch(error => {\n          if (onError) {\n            onError(error);\n          }\n        })\n        .finally(() => {\n          this.setLoading(false);\n        });\n    }\n  }\n\n  private get readOnly() {\n    const { source, updateFunction } = this.props;\n    return source && !updateFunction;\n  }\n\n  private getControl = () => {\n    const { loading } = this.state;\n\n    if (this.readOnly) {\n      return null;\n    }\n\n    return (\n      <div className=\"fhControlGroup\">\n        <Button type=\"primary\" loading={loading} htmlType=\"submit\">\n          保存\n        </Button>\n        <Button\n          disabled={loading}\n          onClick={() => {\n            this.cancel();\n          }}\n        >\n          取消\n        </Button>\n      </div>\n    );\n  };\n\n  private getControlFormItemList(): IFormItemData[] {\n    if (this.readOnly) {\n      return [];\n    }\n    return [\n      {\n        span: 24,\n        content: this.getControl(),\n      },\n    ];\n  }\n\n  public render(): ReactNode {\n    const {\n      formItemList,\n      columnsCount = 1,\n      key = 'id',\n      className,\n      style,\n      hideControls,\n    } = this.props;\n    const { source } = this.state;\n    const controlList: IFormItemData[] = hideControls ? [] : this.getControlFormItemList();\n    const readOnly = this.readOnly;\n    if (readOnly) {\n      formItemList.forEach(item => {\n        if (item.content && React.isValidElement(item.content)) {\n          item.content = React.cloneElement(item.content, { disabled: true });\n        }\n      });\n    }\n    return (\n      <div className=\"fhEditForm\">\n        <Form\n          ref={this.formRef}\n          className={className}\n          style={style}\n          key={source ? source[key] : ''}\n          initialValues={source}\n          onFinish={value => {\n            this.save(value);\n          }}\n        >\n          {FormUtil.renderFormItems(formItemList.concat(controlList), columnsCount)}\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default EditForm;\n"]}]}