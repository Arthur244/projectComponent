{"remainingRequest":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js!/Users/xujunjie/Documents/git/projectComponent/src/IdCardInput/IdCardInput.tsx","dependencies":[{"path":"/Users/xujunjie/Documents/git/projectComponent/src/IdCardInput/IdCardInput.tsx","mtime":1594367130783},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/cache-loader/dist/cjs.js","mtime":1609062632110},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js","mtime":1609062632658},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1609062558293},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js","mtime":1609062632650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJhbnRkL2VzL2lucHV0L3N0eWxlL2NzcyI7CmltcG9ydCBfSW5wdXQgZnJvbSAiYW50ZC9lcy9pbnB1dCI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwp2YXIgX2pzeEZpbGVOYW1lID0gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvc3JjL0lkQ2FyZElucHV0L0lkQ2FyZElucHV0LnRzeCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKaW1wb3J0IGxvZGFzaCBmcm9tICdsb2Rhc2gnOwppbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnOwoKdmFyIElkQ2FyZCA9IHJlcXVpcmUoJ2lkY2FyZCcpOwoKdmFyIGNsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7Cgp2YXIgSWRDYXJkSW5wdXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoSWRDYXJkSW5wdXQsIF9Db21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKElkQ2FyZElucHV0KTsKCiAgZnVuY3Rpb24gSWRDYXJkSW5wdXQoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElkQ2FyZElucHV0KTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChhcmdzKSk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgdmFsdWU6IF90aGlzLnByb3BzLnZhbHVlCiAgICB9OwoKICAgIF90aGlzLnNldElkQ2FyZEluZm8gPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9uU3VjY2VzcyA9IF90aGlzLnByb3BzLm9uU3VjY2VzczsKCiAgICAgIGlmICh2YWx1ZSAmJiBJZENhcmQudmVyaWZ5KHZhbHVlKSkgewogICAgICAgIHZhciBpbmZvID0gSWRDYXJkLmluZm8odmFsdWUpOwogICAgICAgIG9uU3VjY2VzcyhpbmZvKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvblN1Y2Nlc3MoewogICAgICAgICAgcHJvdmluY2U6IHt9LAogICAgICAgICAgY2l0eToge30sCiAgICAgICAgICBhcmVhOiB7fQogICAgICAgIH0pOwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIGlkQ2FyZCA9IGUudGFyZ2V0LnZhbHVlOwogICAgICB2YXIgb25DaGFuZ2UgPSBfdGhpcy5wcm9wcy5vbkNoYW5nZTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICB2YWx1ZTogaWRDYXJkCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5zZXRJZENhcmRJbmZvKGlkQ2FyZCk7CiAgICAgIH0pOwoKICAgICAgaWYgKG9uQ2hhbmdlKSB7CiAgICAgICAgb25DaGFuZ2UoaWRDYXJkKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSWRDYXJkSW5wdXQsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMucHJvcHMudmFsdWU7CiAgICAgIHRoaXMuc2V0SWRDYXJkSW5mbyh2YWx1ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7CiAgICAgIGlmICghbG9kYXNoLmlzRXF1YWwodGhpcy5wcm9wcy52YWx1ZSwgcHJldlByb3BzLnZhbHVlKSkgewogICAgICAgIHZhciBfdmFsdWUgPSB0aGlzLnByb3BzLnZhbHVlOwogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgdmFsdWU6IF92YWx1ZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0SWRDYXJkSW5mbyhfdmFsdWUpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjbGFzc05hbWUgPSBfdGhpcyRwcm9wcy5jbGFzc05hbWUsCiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzLnN0eWxlOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdJZENhcmRJbnB1dCcsIGNsYXNzTmFtZSksCiAgICAgICAgc3R5bGU6IHN0eWxlLAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDc3LAogICAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChfSW5wdXQsIHsKICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSwKICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS52YWx1ZSwKICAgICAgICBfX3NlbGY6IHRoaXMsCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA3OCwKICAgICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsIiwKICAgIC8vIEB0cy1pZ25vcmUKICAgIHZhbHVlOiBmdW5jdGlvbiBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgICAgLy8gQHRzLWlnbm9yZQogICAgICB0aGlzW2tleV0gPSBldmFsKGNvZGUpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIElkQ2FyZElucHV0Owp9KENvbXBvbmVudCk7Cgp2YXIgX2RlZmF1bHQgPSBJZENhcmRJbnB1dDsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CgppZiAodHlwZW9mIElkQ2FyZElucHV0ICE9PSAndW5kZWZpbmVkJyAmJiBJZENhcmRJbnB1dCAmJiBJZENhcmRJbnB1dCA9PT0gT2JqZWN0KElkQ2FyZElucHV0KSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKElkQ2FyZElucHV0KSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJZENhcmRJbnB1dCwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIklkQ2FyZElucHV0IiwKICAgICAgZmlsZW5hbWU6ICJzcmMvSWRDYXJkSW5wdXQvSWRDYXJkSW5wdXQudHN4IgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihJZENhcmRJbnB1dCwgIklkQ2FyZElucHV0IiwgIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvc3JjL0lkQ2FyZElucHV0L0lkQ2FyZElucHV0LnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKF9kZWZhdWx0LCAiZGVmYXVsdCIsICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L3NyYy9JZENhcmRJbnB1dC9JZENhcmRJbnB1dC50c3giKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["/Users/xujunjie/Documents/git/projectComponent/src/IdCardInput/IdCardInput.tsx"],"names":["lodash","React","Component","IdCard","require","classnames","IdCardInput","state","value","props","setIdCardInfo","onSuccess","verify","info","province","city","area","onChange","e","idCard","target","setState","prevProps","isEqual","className","style"],"mappings":";;;;;;;;;;;;;;;;;AACA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAA4C,OAA5C;;AAGA,IAAMC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAA1B;;IAkBME,W;;;;;;;;;;;;;;;UACJC,K,GAA2B;AACzBC,MAAAA,KAAK,EAAE,MAAKC,KAAL,CAAWD;AADO,K;;UAkB3BE,a,GAAgB,UAACF,KAAD,EAAgB;AAAA,UACtBG,SADsB,GACR,MAAKF,KADG,CACtBE,SADsB;;AAE9B,UAAIH,KAAK,IAAIL,MAAM,CAACS,MAAP,CAAcJ,KAAd,CAAb,EAAmC;AACjC,YAAMK,IAAI,GAAGV,MAAM,CAACU,IAAP,CAAYL,KAAZ,CAAb;AACAG,QAAAA,SAAS,CAACE,IAAD,CAAT;AACD,OAHD,MAGO;AACLF,QAAAA,SAAS,CAAC;AACRG,UAAAA,QAAQ,EAAE,EADF;AAERC,UAAAA,IAAI,EAAE,EAFE;AAGRC,UAAAA,IAAI,EAAE;AAHE,SAAD,CAAT;AAKD;AACF,K;;UAEDC,Q,GAAW,UAACC,CAAD,EAAmC;AAC5C,UAAMC,MAAM,GAAGD,CAAC,CAACE,MAAF,CAASZ,KAAxB;AAD4C,UAEpCS,QAFoC,GAEvB,MAAKR,KAFkB,CAEpCQ,QAFoC;;AAG5C,YAAKI,QAAL,CACE;AACEb,QAAAA,KAAK,EAAEW;AADT,OADF,EAIE,YAAM;AACJ,cAAKT,aAAL,CAAmBS,MAAnB;AACD,OANH;;AAQA,UAAIF,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACE,MAAD,CAAR;AACD;AACF,K;;;;;;;wCA3CmB;AAAA,UACVX,KADU,GACA,KAAKC,KADL,CACVD,KADU;AAElB,WAAKE,aAAL,CAAmBF,KAAnB;AACD;;;uCAEkBc,S,EAA8B;AAC/C,UAAI,CAACtB,MAAM,CAACuB,OAAP,CAAe,KAAKd,KAAL,CAAWD,KAA1B,EAAiCc,SAAS,CAACd,KAA3C,CAAL,EAAwD;AAAA,YAC9CA,MAD8C,GACpC,KAAKC,KAD+B,CAC9CD,KAD8C;AAEtD,aAAKa,QAAL,CAAc;AACZb,UAAAA,KAAK,EAALA;AADY,SAAd;AAGA,aAAKE,aAAL,CAAmBF,MAAnB;AACD;AACF;;;6BAgC0B;AAAA,wBACI,KAAKC,KADT;AAAA,UACjBe,SADiB,eACjBA,SADiB;AAAA,UACNC,KADM,eACNA,KADM;AAEzB,0BACE;AAAM,QAAA,SAAS,EAAEpB,UAAU,CAAC,aAAD,EAAgBmB,SAAhB,CAA3B;AAAuD,QAAA,KAAK,EAAEC,KAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,QAAQ,EAAE,KAAKR,QAAtB;AAAgC,QAAA,KAAK,EAAE,KAAKV,KAAL,CAAWC,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD;;;;;;;;;;;EAxDuBN,S;;eA2DXI,W;AAAf;;;;;;;;;;;;;;;;;;;;;;0BA3DMA,W","sourcesContent":["import { Input } from 'antd';\nimport lodash from 'lodash';\nimport React, { Component, ReactNode } from 'react';\nimport IComponentProps from '../interfaces/IComponentProps';\n\nconst IdCard = require('idcard');\nconst classnames = require('classnames');\n\ninterface IIdCardInputState {\n  value: any;\n}\ninterface IIdCardInputProps extends IComponentProps {\n  /**\n   * 身份证初始值\n   */\n  value?: string;\n  /**\n   * 输入正确身份证后的回调\n   */\n  onSuccess: (values: any) => void;\n\n  onChange: (value: any) => void;\n}\n\nclass IdCardInput extends Component<IIdCardInputProps, IIdCardInputState> {\n  state: IIdCardInputState = {\n    value: this.props.value,\n  };\n  componentDidMount() {\n    const { value } = this.props;\n    this.setIdCardInfo(value);\n  }\n\n  componentDidUpdate(prevProps: IIdCardInputProps) {\n    if (!lodash.isEqual(this.props.value, prevProps.value)) {\n      const { value } = this.props;\n      this.setState({\n        value,\n      });\n      this.setIdCardInfo(value);\n    }\n  }\n\n  setIdCardInfo = (value: any) => {\n    const { onSuccess } = this.props;\n    if (value && IdCard.verify(value)) {\n      const info = IdCard.info(value);\n      onSuccess(info);\n    } else {\n      onSuccess({\n        province: {},\n        city: {},\n        area: {},\n      });\n    }\n  };\n\n  onChange = (e: { target: { value: any } }) => {\n    const idCard = e.target.value;\n    const { onChange } = this.props;\n    this.setState(\n      {\n        value: idCard,\n      },\n      () => {\n        this.setIdCardInfo(idCard);\n      },\n    );\n    if (onChange) {\n      onChange(idCard);\n    }\n  };\n\n  public render(): ReactNode {\n    const { className, style } = this.props;\n    return (\n      <span className={classnames('IdCardInput', className)} style={style}>\n        <Input onChange={this.onChange} value={this.state.value} />\n      </span>\n    );\n  }\n}\n\nexport default IdCardInput;\n"]}]}