{"remainingRequest":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js!/Users/xujunjie/Documents/git/projectComponent/src/editForm/EditForm.tsx","dependencies":[{"path":"/Users/xujunjie/Documents/git/projectComponent/src/editForm/EditForm.tsx","mtime":1611497156919},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/cache-loader/dist/cjs.js","mtime":1609062632110},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js","mtime":1609062632658},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1609062558293},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js","mtime":1609062632650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20iL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7aW1wb3J0ImFudGQvZXMvYnV0dG9uL3N0eWxlL2NzcyI7aW1wb3J0IF9CdXR0b24gZnJvbSJhbnRkL2VzL2J1dHRvbiI7aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjtpbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20iL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiO2ltcG9ydCBfaW5oZXJpdHMgZnJvbSIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7aW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjtpbXBvcnQgRm9ybSBmcm9tJ2FudGQvbGliL2Zvcm0vRm9ybSc7aW1wb3J0IEwgZnJvbSdsb2Rhc2gnO2ltcG9ydCBSZWFjdCx7Q29tcG9uZW50fWZyb20ncmVhY3QnO2ltcG9ydCBGb3JtVXRpbCBmcm9tJy4uL3V0aWxzL0Zvcm1VdGlsJztpbXBvcnQnLi9FZGl0Rm9ybS5sZXNzJztpZih0eXBlb2YgSUVkaXRGb3JtUHJvcHMhPT0ndW5kZWZpbmVkJyYmSUVkaXRGb3JtUHJvcHMmJklFZGl0Rm9ybVByb3BzPT09T2JqZWN0KElFZGl0Rm9ybVByb3BzKSYmT2JqZWN0LmlzRXh0ZW5zaWJsZShJRWRpdEZvcm1Qcm9wcykpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShJRWRpdEZvcm1Qcm9wcywnX19maWxlbWV0YScse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx2YWx1ZTp7bmFtZToiSUVkaXRGb3JtUHJvcHMiLGZpbGVuYW1lOiJzcmMvZWRpdEZvcm0vRWRpdEZvcm0udHN4In19KTt9LyoqCiAqIOe8lui+keihqOWNle+8jOaUr+aMge+8mue8lui+ke+8jOmYheivu+S4pOenjeaooeW8j++8m+S8muiHquihjOWIpOaWreaYr+aWsOWinui/mOaYr+S/ruaUuQogKi92YXIgRWRpdEZvcm09LyojX19QVVJFX18qL2Z1bmN0aW9uKF9Db21wb25lbnQpe19pbmhlcml0cyhFZGl0Rm9ybSxfQ29tcG9uZW50KTt2YXIgX3N1cGVyPV9jcmVhdGVTdXBlcihFZGl0Rm9ybSk7ZnVuY3Rpb24gRWRpdEZvcm0ocHJvcHMpe3ZhciBfdGhpcztfY2xhc3NDYWxsQ2hlY2sodGhpcyxFZGl0Rm9ybSk7X3RoaXM9X3N1cGVyLmNhbGwodGhpcyxwcm9wcyk7X3RoaXMuZm9ybVJlZj1SZWFjdC5jcmVhdGVSZWYoKTtfdGhpcy5nZXRDb250cm9sPWZ1bmN0aW9uKCl7dmFyIGxvYWRpbmc9X3RoaXMuc3RhdGUubG9hZGluZztpZihfdGhpcy5yZWFkT25seSl7cmV0dXJuIG51bGw7fXJldHVybi8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLHtjbGFzc05hbWU6ImZoQ29udHJvbEdyb3VwIn0sLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoX0J1dHRvbix7dHlwZToicHJpbWFyeSIsbG9hZGluZzpsb2FkaW5nLGh0bWxUeXBlOiJzdWJtaXQifSwiXHU0RkREXHU1QjU4IiksLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoX0J1dHRvbix7ZGlzYWJsZWQ6bG9hZGluZyxvbkNsaWNrOmZ1bmN0aW9uIG9uQ2xpY2soKXtfdGhpcy5jYW5jZWwoKTt9fSwiXHU1M0Q2XHU2RDg4IikpO307X3RoaXMuc3RhdGU9e2xvYWRpbmc6ZmFsc2V9O3JldHVybiBfdGhpczt9X2NyZWF0ZUNsYXNzKEVkaXRGb3JtLFt7a2V5OiJzdWJtaXQiLHZhbHVlOmZ1bmN0aW9uIHN1Ym1pdCgpe2lmKHRoaXMuZm9ybVJlZi5jdXJyZW50KXt0aGlzLmZvcm1SZWYuY3VycmVudC5zdWJtaXQoKTt9fX0se2tleToiY2FuY2VsIix2YWx1ZTpmdW5jdGlvbiBjYW5jZWwoKXt2YXIgb25DYW5jZWw9dGhpcy5wcm9wcy5vbkNhbmNlbDtpZihvbkNhbmNlbCl7b25DYW5jZWwoKTt9fX0se2tleToiY29tcG9uZW50RGlkTW91bnQiLHZhbHVlOmZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCl7dGhpcy51cGRhdGVTdGF0ZVNvdXJjZSgpO319LHtrZXk6ImNvbXBvbmVudERpZFVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcyl7aWYoIUwuaXNFcXVhbCh0aGlzLnByb3BzLnNvdXJjZSxwcmV2UHJvcHMuc291cmNlKSl7dGhpcy51cGRhdGVTdGF0ZVNvdXJjZSgpO319fSx7a2V5OiJ1cGRhdGVTdGF0ZVNvdXJjZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgX3VwZGF0ZVN0YXRlU291cmNlPV9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpe3ZhciBfdGhpcyRwcm9wcyxzb3VyY2UsZ2V0RGV0YWlsRnVuY3Rpb24sZGF0YTtyZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KXt3aGlsZSgxKXtzd2l0Y2goX2NvbnRleHQucHJldj1fY29udGV4dC5uZXh0KXtjYXNlIDA6X3RoaXMkcHJvcHM9dGhpcy5wcm9wcyxzb3VyY2U9X3RoaXMkcHJvcHMuc291cmNlLGdldERldGFpbEZ1bmN0aW9uPV90aGlzJHByb3BzLmdldERldGFpbEZ1bmN0aW9uO2lmKHNvdXJjZSl7X2NvbnRleHQubmV4dD01O2JyZWFrO310aGlzLnNldFN0YXRlKHtzb3VyY2U6dW5kZWZpbmVkfSk7X2NvbnRleHQubmV4dD0xMzticmVhaztjYXNlIDU6aWYoIWdldERldGFpbEZ1bmN0aW9uKXtfY29udGV4dC5uZXh0PTEyO2JyZWFrO31fY29udGV4dC5uZXh0PTg7cmV0dXJuIGdldERldGFpbEZ1bmN0aW9uKHNvdXJjZSk7Y2FzZSA4OmRhdGE9X2NvbnRleHQuc2VudDt0aGlzLnNldFN0YXRlKHtzb3VyY2U6ZGF0YX0pO19jb250ZXh0Lm5leHQ9MTM7YnJlYWs7Y2FzZSAxMjp0aGlzLnNldFN0YXRlKHtzb3VyY2U6c291cmNlfSk7Y2FzZSAxMzpjYXNlImVuZCI6cmV0dXJuIF9jb250ZXh0LnN0b3AoKTt9fX0sX2NhbGxlZSx0aGlzKTt9KSk7ZnVuY3Rpb24gdXBkYXRlU3RhdGVTb3VyY2UoKXtyZXR1cm4gX3VwZGF0ZVN0YXRlU291cmNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9cmV0dXJuIHVwZGF0ZVN0YXRlU291cmNlO30oKX0se2tleToic2V0TG9hZGluZyIsdmFsdWU6ZnVuY3Rpb24gc2V0TG9hZGluZyhsb2FkaW5nKXt2YXIgb25Mb2FkaW5nQ2hhbmdlPXRoaXMucHJvcHMub25Mb2FkaW5nQ2hhbmdlO3RoaXMuc2V0U3RhdGUoe2xvYWRpbmc6bG9hZGluZ30pO2lmKG9uTG9hZGluZ0NoYW5nZSl7b25Mb2FkaW5nQ2hhbmdlKGxvYWRpbmcpO319fSx7a2V5OiJzYXZlIix2YWx1ZTpmdW5jdGlvbiBzYXZlKHZhbHVlKXt2YXIgX3RoaXMyPXRoaXM7dmFyIF90aGlzJHByb3BzMj10aGlzLnByb3BzLGFkZEZ1bmN0aW9uPV90aGlzJHByb3BzMi5hZGRGdW5jdGlvbix1cGRhdGVGdW5jdGlvbj1fdGhpcyRwcm9wczIudXBkYXRlRnVuY3Rpb24sb25Paz1fdGhpcyRwcm9wczIub25PayxvbkVycm9yPV90aGlzJHByb3BzMi5vbkVycm9yO3ZhciBzb3VyY2U9dGhpcy5zdGF0ZS5zb3VyY2U7dmFyIHByb21pc2U9bnVsbDtpZihzb3VyY2Upe2lmKHVwZGF0ZUZ1bmN0aW9uKXtwcm9taXNlPXVwZGF0ZUZ1bmN0aW9uKHZhbHVlLHNvdXJjZSk7fX1lbHNle2lmKGFkZEZ1bmN0aW9uKXtwcm9taXNlPWFkZEZ1bmN0aW9uKHZhbHVlKTt9fWlmKHByb21pc2Upe3RoaXMuc2V0TG9hZGluZyh0cnVlKTtwcm9taXNlLnRoZW4oZnVuY3Rpb24oKXtpZihvbk9rKXtvbk9rKCk7fX0pWyJjYXRjaCJdKGZ1bmN0aW9uKGVycm9yKXtpZihvbkVycm9yKXtvbkVycm9yKGVycm9yKTt9fSlbImZpbmFsbHkiXShmdW5jdGlvbigpe190aGlzMi5zZXRMb2FkaW5nKGZhbHNlKTt9KTt9fX0se2tleToiZ2V0Q29udHJvbEZvcm1JdGVtTGlzdCIsdmFsdWU6ZnVuY3Rpb24gZ2V0Q29udHJvbEZvcm1JdGVtTGlzdCgpe2lmKHRoaXMucmVhZE9ubHkpe3JldHVybltdO31yZXR1cm5be3NwYW46MjQsY29udGVudDp0aGlzLmdldENvbnRyb2woKX1dO319LHtrZXk6InJlbmRlciIsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyKCl7dmFyIF90aGlzMz10aGlzO3ZhciBfdGhpcyRwcm9wczM9dGhpcy5wcm9wcyxmb3JtSXRlbUxpc3Q9X3RoaXMkcHJvcHMzLmZvcm1JdGVtTGlzdCxfdGhpcyRwcm9wczMkY29sdW1uc0M9X3RoaXMkcHJvcHMzLmNvbHVtbnNDb3VudCxjb2x1bW5zQ291bnQ9X3RoaXMkcHJvcHMzJGNvbHVtbnNDPT09dm9pZCAwPzE6X3RoaXMkcHJvcHMzJGNvbHVtbnNDLF90aGlzJHByb3BzMyRrZXk9X3RoaXMkcHJvcHMzLmtleSxrZXk9X3RoaXMkcHJvcHMzJGtleT09PXZvaWQgMD8naWQnOl90aGlzJHByb3BzMyRrZXksY2xhc3NOYW1lPV90aGlzJHByb3BzMy5jbGFzc05hbWUsc3R5bGU9X3RoaXMkcHJvcHMzLnN0eWxlLGhpZGVDb250cm9scz1fdGhpcyRwcm9wczMuaGlkZUNvbnRyb2xzO3ZhciBzb3VyY2U9dGhpcy5zdGF0ZS5zb3VyY2U7dmFyIGNvbnRyb2xMaXN0PWhpZGVDb250cm9scz9bXTp0aGlzLmdldENvbnRyb2xGb3JtSXRlbUxpc3QoKTt2YXIgcmVhZE9ubHk9dGhpcy5yZWFkT25seTtpZihyZWFkT25seSl7Zm9ybUl0ZW1MaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSl7aWYoaXRlbS5jb250ZW50JiZSZWFjdC5pc1ZhbGlkRWxlbWVudChpdGVtLmNvbnRlbnQpKXtpdGVtLmNvbnRlbnQ9UmVhY3QuY2xvbmVFbGVtZW50KGl0ZW0uY29udGVudCx7ZGlzYWJsZWQ6dHJ1ZX0pO319KTt9cmV0dXJuLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIse2NsYXNzTmFtZToiZmhFZGl0Rm9ybSJ9LC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm0se3JlZjp0aGlzLmZvcm1SZWYsY2xhc3NOYW1lOmNsYXNzTmFtZSxzdHlsZTpzdHlsZSxrZXk6c291cmNlP3NvdXJjZVtrZXldOicnLGluaXRpYWxWYWx1ZXM6c291cmNlLG9uRmluaXNoOmZ1bmN0aW9uIG9uRmluaXNoKHZhbHVlKXtfdGhpczMuc2F2ZSh2YWx1ZSk7fX0sRm9ybVV0aWwucmVuZGVyRm9ybUl0ZW1zKGZvcm1JdGVtTGlzdC5jb25jYXQoY29udHJvbExpc3QpLGNvbHVtbnNDb3VudCkpKTt9fSx7a2V5OiJyZWFkT25seSIsZ2V0OmZ1bmN0aW9uIGdldCgpe3ZhciBfdGhpcyRwcm9wczQ9dGhpcy5wcm9wcyxzb3VyY2U9X3RoaXMkcHJvcHM0LnNvdXJjZSx1cGRhdGVGdW5jdGlvbj1fdGhpcyRwcm9wczQudXBkYXRlRnVuY3Rpb247cmV0dXJuIHNvdXJjZSYmIXVwZGF0ZUZ1bmN0aW9uO319XSk7cmV0dXJuIEVkaXRGb3JtO30oQ29tcG9uZW50KTtleHBvcnQgZGVmYXVsdCBFZGl0Rm9ybTtpZih0eXBlb2YgRWRpdEZvcm0hPT0ndW5kZWZpbmVkJyYmRWRpdEZvcm0mJkVkaXRGb3JtPT09T2JqZWN0KEVkaXRGb3JtKSYmT2JqZWN0LmlzRXh0ZW5zaWJsZShFZGl0Rm9ybSkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShFZGl0Rm9ybSwnX19maWxlbWV0YScse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx2YWx1ZTp7bmFtZToiRWRpdEZvcm0iLGZpbGVuYW1lOiJzcmMvZWRpdEZvcm0vRWRpdEZvcm0udHN4In19KTt9"},{"version":3,"sources":["/Users/xujunjie/Documents/git/projectComponent/src/editForm/EditForm.tsx"],"names":["Form","L","React","Component","FormUtil","EditForm","props","formRef","createRef","getControl","loading","state","readOnly","cancel","current","submit","onCancel","updateStateSource","prevProps","isEqual","source","getDetailFunction","setState","undefined","data","onLoadingChange","value","addFunction","updateFunction","onOk","onError","promise","setLoading","then","error","span","content","formItemList","columnsCount","key","className","style","hideControls","controlList","getControlFormItemList","forEach","item","isValidElement","cloneElement","disabled","save","renderFormItems","concat"],"mappings":"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","sourcesContent":["import { Button } from 'antd';\nimport Form, { FormInstance } from 'antd/lib/form/Form';\nimport { Store } from 'antd/lib/form/interface';\nimport L from 'lodash';\nimport React, { Component, ReactNode } from 'react';\nimport IComponentProps from '../interfaces/IComponentProps';\nimport IFormItemData from '../interfaces/IFormItemData';\nimport FormUtil from '../utils/FormUtil';\nimport './EditForm.less';\n\ninterface IEditFormState<T> {\n  loading: boolean;\n  source?: T;\n}\nexport interface IEditFormProps<T> extends IComponentProps {\n  /**\n   * 新增函数，then表示成功，catch表示异常\n   */\n  addFunction?: (value: Store) => Promise<any>;\n\n  /**\n   * 编辑函数，then表示成功，catch表示异常\n   */\n  updateFunction?: (value: Store, source: T) => Promise<any>;\n\n  /**\n   * 获取源数据完整信息的方法。\n   * 当props.source只是部分信息，而表单中需要展示完整信息时，需通过此方法获取完整数据\n   */\n  getDetailFunction?: (source: T) => Promise<T>;\n\n  /**\n   * 源数据，如果是“编辑模式”，且设置了“源数据”，保存时调用编辑函数\n   */\n  source?: T;\n\n  /**\n   * 表单项列表\n   */\n  formItemList: IFormItemData[];\n\n  /**\n   * 列数\n   */\n  columnsCount?: number;\n\n  /**\n   * 主键名称\n   */\n  key?: string;\n\n  /**\n   * 取消事件\n   */\n  onCancel?: () => void;\n\n  /**\n   * 保存成功事件\n   */\n  onOk?: () => void;\n\n  /**\n   * 保存出错的事件\n   */\n  onError?: (error: any) => void;\n\n  /**\n   * 是否隐藏操作按钮，如果设置为true，需自定义控制按钮\n   */\n  hideControls?: Boolean;\n\n  onLoadingChange?: (value: boolean) => void;\n}\n\n/**\n * 编辑表单，支持：编辑，阅读两种模式；会自行判断是新增还是修改\n */\nclass EditForm<T extends Store> extends Component<IEditFormProps<T>, IEditFormState<T>> {\n  private formRef = React.createRef<FormInstance>();\n\n  constructor(props: IEditFormProps<T>) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  public submit() {\n    if (this.formRef.current) {\n      this.formRef.current.submit();\n    }\n  }\n\n  public cancel() {\n    const { onCancel } = this.props;\n    if (onCancel) {\n      onCancel();\n    }\n  }\n\n  componentDidMount() {\n    this.updateStateSource();\n  }\n\n  componentDidUpdate(prevProps: IEditFormProps<T>) {\n    if (!L.isEqual(this.props.source, prevProps.source)) {\n      this.updateStateSource();\n    }\n  }\n\n  private async updateStateSource() {\n    const { source, getDetailFunction } = this.props;\n    if (!source) {\n      this.setState({ source: undefined });\n    } else if (getDetailFunction) {\n      const data = await getDetailFunction(source);\n      this.setState({ source: data });\n    } else {\n      this.setState({ source });\n    }\n  }\n\n  private setLoading(loading: boolean) {\n    const { onLoadingChange } = this.props;\n    this.setState({ loading });\n    if (onLoadingChange) {\n      onLoadingChange(loading);\n    }\n  }\n\n  private save(value: Store) {\n    const { addFunction, updateFunction, onOk, onError } = this.props;\n    const { source } = this.state;\n    let promise: Promise<any> | null = null;\n    if (source) {\n      if (updateFunction) {\n        promise = updateFunction(value, source);\n      }\n    } else {\n      if (addFunction) {\n        promise = addFunction(value);\n      }\n    }\n\n    if (promise) {\n      this.setLoading(true);\n      promise\n        .then(() => {\n          if (onOk) {\n            onOk();\n          }\n        })\n        .catch(error => {\n          if (onError) {\n            onError(error);\n          }\n        })\n        .finally(() => {\n          this.setLoading(false);\n        });\n    }\n  }\n\n  private get readOnly() {\n    const { source, updateFunction } = this.props;\n    return source && !updateFunction;\n  }\n\n  private getControl = () => {\n    const { loading } = this.state;\n\n    if (this.readOnly) {\n      return null;\n    }\n\n    return (\n      <div className=\"fhControlGroup\">\n        <Button type=\"primary\" loading={loading} htmlType=\"submit\">\n          保存\n        </Button>\n        <Button\n          disabled={loading}\n          onClick={() => {\n            this.cancel();\n          }}\n        >\n          取消\n        </Button>\n      </div>\n    );\n  };\n\n  private getControlFormItemList(): IFormItemData[] {\n    if (this.readOnly) {\n      return [];\n    }\n    return [\n      {\n        span: 24,\n        content: this.getControl(),\n      },\n    ];\n  }\n\n  public render(): ReactNode {\n    const {\n      formItemList,\n      columnsCount = 1,\n      key = 'id',\n      className,\n      style,\n      hideControls,\n    } = this.props;\n    const { source } = this.state;\n    const controlList: IFormItemData[] = hideControls ? [] : this.getControlFormItemList();\n    const readOnly = this.readOnly;\n    if (readOnly) {\n      formItemList.forEach(item => {\n        if (item.content && React.isValidElement(item.content)) {\n          item.content = React.cloneElement(item.content, { disabled: true });\n        }\n      });\n    }\n    return (\n      <div className=\"fhEditForm\">\n        <Form\n          ref={this.formRef}\n          className={className}\n          style={style}\n          key={source ? source[key] : ''}\n          initialValues={source}\n          onFinish={value => {\n            this.save(value);\n          }}\n        >\n          {FormUtil.renderFormItems(formItemList.concat(controlList), columnsCount)}\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default EditForm;\n"]}]}