{"remainingRequest":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js!/Users/xujunjie/Documents/git/projectComponent/src/confirmButton/ConfirmButton.tsx","dependencies":[{"path":"/Users/xujunjie/Documents/git/projectComponent/src/confirmButton/ConfirmButton.tsx","mtime":1594367130785},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/cache-loader/dist/cjs.js","mtime":1609062632110},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js","mtime":1609062632658},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1609062558293},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js","mtime":1609062632650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ImFudGQvZXMvYnV0dG9uL3N0eWxlL2NzcyI7aW1wb3J0IF9CdXR0b24gZnJvbSJhbnRkL2VzL2J1dHRvbiI7aW1wb3J0ImFudGQvZXMvbW9kYWwvc3R5bGUvY3NzIjtpbXBvcnQgX01vZGFsIGZyb20iYW50ZC9lcy9tb2RhbCI7aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20iL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjtpbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20iL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiO2ltcG9ydCBfaW5oZXJpdHMgZnJvbSIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7aW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjtpbXBvcnQgUmVhY3Qse0NvbXBvbmVudH1mcm9tJ3JlYWN0JztpbXBvcnQnLi9Db25maXJtQnV0dG9uLmxlc3MnO3ZhciBjbGFzc25hbWVzPXJlcXVpcmUoJ2NsYXNzbmFtZXMnKTsvKioKICog56Gu6K6k5oyJ6ZKuCiAqL3ZhciBDb25maXJtQnV0dG9uPS8qI19fUFVSRV9fKi9mdW5jdGlvbihfQ29tcG9uZW50KXtfaW5oZXJpdHMoQ29uZmlybUJ1dHRvbixfQ29tcG9uZW50KTt2YXIgX3N1cGVyPV9jcmVhdGVTdXBlcihDb25maXJtQnV0dG9uKTtmdW5jdGlvbiBDb25maXJtQnV0dG9uKHByb3BzKXt2YXIgX3RoaXM7X2NsYXNzQ2FsbENoZWNrKHRoaXMsQ29uZmlybUJ1dHRvbik7X3RoaXM9X3N1cGVyLmNhbGwodGhpcyxwcm9wcyk7X3RoaXMuY2xpY2tIYW5kbGVyPS8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKXt2YXIgb25Db25maXJtLGlzQ29uZmlybTtyZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KXt3aGlsZSgxKXtzd2l0Y2goX2NvbnRleHQucHJldj1fY29udGV4dC5uZXh0KXtjYXNlIDA6b25Db25maXJtPV90aGlzLnByb3BzLm9uQ29uZmlybTtpc0NvbmZpcm09ZmFsc2U7X3RoaXMuc2V0U3RhdGUoe2xvYWRpbmc6dHJ1ZX0pO19jb250ZXh0Lm5leHQ9NTtyZXR1cm4gX3RoaXMudmFsaWRhdGUoKTtjYXNlIDU6aXNDb25maXJtPV9jb250ZXh0LnNlbnQ7X3RoaXMuc2V0U3RhdGUoe2xvYWRpbmc6ZmFsc2V9KTtpZihpc0NvbmZpcm0mJm9uQ29uZmlybSl7b25Db25maXJtKCk7fWNhc2UgODpjYXNlImVuZCI6cmV0dXJuIF9jb250ZXh0LnN0b3AoKTt9fX0sX2NhbGxlZSk7fSkpO190aGlzLnN0YXRlPXtsb2FkaW5nOmZhbHNlfTtyZXR1cm4gX3RoaXM7fV9jcmVhdGVDbGFzcyhDb25maXJtQnV0dG9uLFt7a2V5OiJyZW5kZXIiLHZhbHVlOmZ1bmN0aW9uIHJlbmRlcigpe3ZhciBfdGhpcyRwcm9wcz10aGlzLnByb3BzLGNsYXNzTmFtZT1fdGhpcyRwcm9wcy5jbGFzc05hbWUsc3R5bGU9X3RoaXMkcHJvcHMuc3R5bGU7cmV0dXJuLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLHtjbGFzc05hbWU6Y2xhc3NuYW1lcygnQ29uZmlybUJ1dHRvbicsY2xhc3NOYW1lKSxzdHlsZTpzdHlsZSxvbkNsaWNrOnRoaXMuY2xpY2tIYW5kbGVyfSx0aGlzLmdldENoaWxkcmVuKCkpO319LHtrZXk6InZhbGlkYXRlIix2YWx1ZTpmdW5jdGlvbiB2YWxpZGF0ZSgpe3ZhciB2YWxpZGF0ZT10aGlzLnByb3BzLnZhbGlkYXRlO2lmKHZhbGlkYXRlKXtyZXR1cm4gdmFsaWRhdGUoKTt9ZWxzZXtyZXR1cm4gdGhpcy5kZWZhdWx0VmFsaWRhdGUoKTt9fX0se2tleToiZGVmYXVsdFZhbGlkYXRlIix2YWx1ZTpmdW5jdGlvbiBkZWZhdWx0VmFsaWRhdGUoKXt2YXIgX3RoaXMyPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe3ZhciBtb2RhbENvbnRlbnQ9X3RoaXMyLnByb3BzLm1vZGFsQ29udGVudDtfTW9kYWwuY29uZmlybSh7dGl0bGU6bW9kYWxDb250ZW50P21vZGFsQ29udGVudC50aXRsZTon5pON5L2c5LiN5Y+v5oGi5aSNJyxjb250ZW50Om1vZGFsQ29udGVudD9tb2RhbENvbnRlbnQuY29udGVudDon5q2k5pON5L2c5LiN5Y+v5oGi5aSN77yM6K+356Gu6K6k5piv5ZCm57un57utJyxvbk9rOmZ1bmN0aW9uIG9uT2soKXtyZXNvbHZlKHRydWUpO30sb25DYW5jZWw6ZnVuY3Rpb24gb25DYW5jZWwoKXtyZXNvbHZlKGZhbHNlKTt9fSk7fSk7fX0se2tleToiZ2V0Q2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uIGdldENoaWxkcmVuKCl7dmFyIGxvYWRpbmc9dGhpcy5zdGF0ZS5sb2FkaW5nO3ZhciBfdGhpcyRwcm9wczI9dGhpcy5wcm9wcyxnZXRFbGVtZW50PV90aGlzJHByb3BzMi5nZXRFbGVtZW50LHRleHQ9X3RoaXMkcHJvcHMyLnRleHQ7aWYoZ2V0RWxlbWVudCl7cmV0dXJuIGdldEVsZW1lbnQobG9hZGluZyk7fXJldHVybi8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KF9CdXR0b24se2Rhbmdlcjp0cnVlLGdob3N0OnRydWUsbG9hZGluZzpsb2FkaW5nfSx0ZXh0fHwn5Yig6ZmkJyk7fX1dKTtyZXR1cm4gQ29uZmlybUJ1dHRvbjt9KENvbXBvbmVudCk7ZXhwb3J0IGRlZmF1bHQgQ29uZmlybUJ1dHRvbjtpZih0eXBlb2YgQ29uZmlybUJ1dHRvbiE9PSd1bmRlZmluZWQnJiZDb25maXJtQnV0dG9uJiZDb25maXJtQnV0dG9uPT09T2JqZWN0KENvbmZpcm1CdXR0b24pJiZPYmplY3QuaXNFeHRlbnNpYmxlKENvbmZpcm1CdXR0b24pKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uZmlybUJ1dHRvbiwnX19maWxlbWV0YScse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx2YWx1ZTp7bmFtZToiQ29uZmlybUJ1dHRvbiIsZmlsZW5hbWU6InNyYy9jb25maXJtQnV0dG9uL0NvbmZpcm1CdXR0b24udHN4In19KTt9"},{"version":3,"sources":["/Users/xujunjie/Documents/git/projectComponent/src/confirmButton/ConfirmButton.tsx"],"names":["React","Component","classnames","require","ConfirmButton","props","clickHandler","onConfirm","isConfirm","setState","loading","validate","state","className","style","getChildren","defaultValidate","Promise","resolve","modalContent","confirm","title","content","onOk","onCancel","getElement","text"],"mappings":"klCACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAA4C,OAA5C,CAEA,MAAO,sBAAP,CAEA,GAAMC,CAAAA,UAAU,CAAGC,OAAO,CAAC,YAAD,CAA1B,CA4CA;AACA;AACA,G,GACMC,CAAAA,a,8GACJ,uBAAYC,KAAZ,CAAwC,+CACtC,uBAAMA,KAAN,EADsC,MAoBhCC,YApBgC,sEAoBjB,2JACbC,SADa,CACC,MAAKF,KADN,CACbE,SADa,CAEjBC,SAFiB,CAEL,KAFK,CAIrB,MAAKC,QAAL,CAAc,CAAEC,OAAO,CAAE,IAAX,CAAd,EAJqB,sBAKH,OAAKC,QAAL,EALG,QAKrBH,SALqB,eAMrB,MAAKC,QAAL,CAAc,CAAEC,OAAO,CAAE,KAAX,CAAd,EACA,GAAIF,SAAS,EAAID,SAAjB,CAA4B,CAC1BA,SAAS,GACV,CAToB,sDApBiB,GAEtC,MAAKK,KAAL,CAAa,CACXF,OAAO,CAAE,KADE,CAAb,CAFsC,aAKvC,C,iEAE0B,iBACI,KAAKL,KADT,CACjBQ,SADiB,aACjBA,SADiB,CACNC,KADM,aACNA,KADM,CAEzB,mBACE,4BACE,SAAS,CAAEZ,UAAU,CAAC,eAAD,CAAkBW,SAAlB,CADvB,CAEE,KAAK,CAAEC,KAFT,CAGE,OAAO,CAAE,KAAKR,YAHhB,EAKG,KAAKS,WAAL,EALH,CADF,CASD,C,2CAckB,IACTJ,CAAAA,QADS,CACI,KAAKN,KADT,CACTM,QADS,CAEjB,GAAIA,QAAJ,CAAc,CACZ,MAAOA,CAAAA,QAAQ,EAAf,CACD,CAFD,IAEO,CACL,MAAO,MAAKK,eAAL,EAAP,CACD,CACF,C,yDAE2C,iBAC1C,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAAAC,OAAO,CAAI,IACpBC,CAAAA,YADoB,CACH,MAAI,CAACd,KADF,CACpBc,YADoB,CAE5B,OAAMC,OAAN,CAAc,CACZC,KAAK,CAAEF,YAAY,CAAGA,YAAY,CAACE,KAAhB,CAAwB,QAD/B,CAEZC,OAAO,CAAEH,YAAY,CAAGA,YAAY,CAACG,OAAhB,CAA0B,iBAFnC,CAGZC,IAAI,CAAE,eAAM,CACVL,OAAO,CAAC,IAAD,CAAP,CACD,CALW,CAMZM,QAAQ,CAAE,mBAAM,CACdN,OAAO,CAAC,KAAD,CAAP,CACD,CARW,CAAd,EAUD,CAZM,CAAP,CAaD,C,iDAEqB,IACZR,CAAAA,OADY,CACA,KAAKE,KADL,CACZF,OADY,kBAES,KAAKL,KAFd,CAEZoB,UAFY,cAEZA,UAFY,CAEAC,IAFA,cAEAA,IAFA,CAGpB,GAAID,UAAJ,CAAgB,CACd,MAAOA,CAAAA,UAAU,CAACf,OAAD,CAAjB,CACD,CACD,mBACE,6BAAQ,MAAM,KAAd,CAAe,KAAK,KAApB,CAAqB,OAAO,CAAEA,OAA9B,EACGgB,IAAI,EAAI,IADX,CADF,CAKD,C,2BArEyBzB,S,EAwE5B,cAAeG,CAAAA,aAAf,C","sourcesContent":["import { Button, Modal } from 'antd';\nimport React, { Component, ReactNode } from 'react';\nimport IComponentProps from '../interfaces/IComponentProps';\nimport './ConfirmButton.less';\n\nconst classnames = require('classnames');\n\ninterface IConfirmButtonState {\n  loading: boolean;\n}\ninterface IConfirmButtonProps extends IComponentProps {\n  /**\n   * 确认成功后，触发的事件\n   */\n  onConfirm?: () => void;\n\n  /**\n   * 是否确认的方法，默认为弹窗并由用户选择。\n   *\n   * 自定义验证函数须返回 Promise<boolean>，为true时，表示确认\n   */\n  validate?: () => Promise<boolean>;\n\n  /**\n   * 显示的元素\n   */\n  getElement?: (loading: boolean) => ReactNode;\n\n  /**\n   * 按钮上的文字\n   */\n  text?: string;\n\n  /**\n   * 如果使用默认的弹窗验证方式，且需要自定义文字，可使用此属性\n   */\n  modalContent?: {\n    /**\n     * 弹窗标题\n     */\n    title: string;\n\n    /**\n     * 弹窗内容\n     */\n    content: string | ReactNode;\n  };\n}\n\n/**\n * 确认按钮\n */\nclass ConfirmButton extends Component<IConfirmButtonProps, IConfirmButtonState> {\n  constructor(props: IConfirmButtonProps) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  public render(): ReactNode {\n    const { className, style } = this.props;\n    return (\n      <span\n        className={classnames('ConfirmButton', className)}\n        style={style}\n        onClick={this.clickHandler}\n      >\n        {this.getChildren()}\n      </span>\n    );\n  }\n\n  private clickHandler = async () => {\n    const { onConfirm } = this.props;\n    let isConfirm = false;\n\n    this.setState({ loading: true });\n    isConfirm = await this.validate();\n    this.setState({ loading: false });\n    if (isConfirm && onConfirm) {\n      onConfirm();\n    }\n  };\n\n  private validate() {\n    const { validate } = this.props;\n    if (validate) {\n      return validate();\n    } else {\n      return this.defaultValidate();\n    }\n  }\n\n  private defaultValidate(): Promise<boolean> {\n    return new Promise(resolve => {\n      const { modalContent } = this.props;\n      Modal.confirm({\n        title: modalContent ? modalContent.title : '操作不可恢复',\n        content: modalContent ? modalContent.content : '此操作不可恢复，请确认是否继续',\n        onOk: () => {\n          resolve(true);\n        },\n        onCancel: () => {\n          resolve(false);\n        },\n      });\n    });\n  }\n\n  private getChildren() {\n    const { loading } = this.state;\n    const { getElement, text } = this.props;\n    if (getElement) {\n      return getElement(loading);\n    }\n    return (\n      <Button danger ghost loading={loading}>\n        {text || '删除'}\n      </Button>\n    );\n  }\n}\n\nexport default ConfirmButton;\n"]}]}