{"remainingRequest":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js!/Users/xujunjie/Documents/git/projectComponent/src/editModal/EditModal.tsx","dependencies":[{"path":"/Users/xujunjie/Documents/git/projectComponent/src/editModal/EditModal.tsx","mtime":1611498285596},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/cache-loader/dist/cjs.js","mtime":1609062632110},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js","mtime":1609062632658},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1609062558293},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js","mtime":1609062632650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ImFudGQvZXMvbW9kYWwvc3R5bGUvY3NzIjtpbXBvcnQgX01vZGFsIGZyb20iYW50ZC9lcy9tb2RhbCI7aW1wb3J0ImFudGQvZXMvYnV0dG9uL3N0eWxlL2NzcyI7aW1wb3J0IF9CdXR0b24gZnJvbSJhbnRkL2VzL2J1dHRvbiI7aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjtpbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20iL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiO2ltcG9ydCBfaW5oZXJpdHMgZnJvbSIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7aW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjtpbXBvcnQgUmVhY3Qse0NvbXBvbmVudH1mcm9tJ3JlYWN0JztpbXBvcnQgRWRpdEZvcm0gZnJvbScuLi9lZGl0Rm9ybS9FZGl0Rm9ybSc7dmFyIEVkaXRNb2RhbD0vKiNfX1BVUkVfXyovZnVuY3Rpb24oX0NvbXBvbmVudCl7X2luaGVyaXRzKEVkaXRNb2RhbCxfQ29tcG9uZW50KTt2YXIgX3N1cGVyPV9jcmVhdGVTdXBlcihFZGl0TW9kYWwpO2Z1bmN0aW9uIEVkaXRNb2RhbChwcm9wcyl7dmFyIF90aGlzO19jbGFzc0NhbGxDaGVjayh0aGlzLEVkaXRNb2RhbCk7X3RoaXM9X3N1cGVyLmNhbGwodGhpcyxwcm9wcyk7X3RoaXMuZWRpdEZvcm09bnVsbDtfdGhpcy5jbG9zZT1mdW5jdGlvbigpe3ZhciBjbG9zZT1fdGhpcy5wcm9wcy5jbG9zZTtpZihjbG9zZSl7Y2xvc2UoKTt9fTtfdGhpcy5zdGF0ZT17bG9hZGluZzpmYWxzZX07cmV0dXJuIF90aGlzO31fY3JlYXRlQ2xhc3MoRWRpdE1vZGFsLFt7a2V5OiJyZW5kZXJUaXRsZSIsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyVGl0bGUoKXt2YXIgX3RoaXMkcHJvcHM9dGhpcy5wcm9wcyxlZGl0Rm9ybVByb3BzPV90aGlzJHByb3BzLmVkaXRGb3JtUHJvcHMscmVuZGVyVGl0bGU9X3RoaXMkcHJvcHMucmVuZGVyVGl0bGU7aWYocmVuZGVyVGl0bGUpe3JldHVybiByZW5kZXJUaXRsZSgpO312YXIgc291cmNlPWVkaXRGb3JtUHJvcHMuc291cmNlLHVwZGF0ZUZ1bmN0aW9uPWVkaXRGb3JtUHJvcHMudXBkYXRlRnVuY3Rpb247aWYoIXNvdXJjZSl7cmV0dXJuJ+aWsOWinic7fWVsc2UgaWYoIXVwZGF0ZUZ1bmN0aW9uKXtyZXR1cm4n5p+l55yLJzt9ZWxzZXtyZXR1cm4n57yW6L6RJzt9fX0se2tleToicmVuZGVyRm9vdGVyIix2YWx1ZTpmdW5jdGlvbiByZW5kZXJGb290ZXIoKXt2YXIgX3RoaXMyPXRoaXM7dmFyIGxvYWRpbmc9dGhpcy5zdGF0ZS5sb2FkaW5nO2lmKHRoaXMucmVhZE9ubHkpe3JldHVybiBudWxsO31yZXR1cm4vKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCxudWxsLC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KF9CdXR0b24se2Rpc2FibGVkOmxvYWRpbmcsb25DbGljazpmdW5jdGlvbiBvbkNsaWNrKCl7aWYoX3RoaXMyLmVkaXRGb3JtKXtfdGhpczIuZWRpdEZvcm0uY2FuY2VsKCk7fX19LCJcdTUzRDZcdTZEODgiKSwvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChfQnV0dG9uLHtsb2FkaW5nOmxvYWRpbmcsdHlwZToicHJpbWFyeSIsb25DbGljazpmdW5jdGlvbiBvbkNsaWNrKCl7aWYoX3RoaXMyLmVkaXRGb3JtKXtfdGhpczIuZWRpdEZvcm0uc3VibWl0KCk7fX19LCJcdTRGRERcdTVCNTgiKSk7fX0se2tleToicmVuZGVyIix2YWx1ZTpmdW5jdGlvbiByZW5kZXIoKXt2YXIgX3RoaXMzPXRoaXM7dmFyIF90aGlzJHByb3BzMj10aGlzLnByb3BzLHZpc2libGU9X3RoaXMkcHJvcHMyLnZpc2libGUsZWRpdEZvcm1Qcm9wcz1fdGhpcyRwcm9wczIuZWRpdEZvcm1Qcm9wcyxtb2RhbFByb3BzPV90aGlzJHByb3BzMi5tb2RhbFByb3BzLGNsYXNzTmFtZT1fdGhpcyRwcm9wczIuY2xhc3NOYW1lLHN0eWxlPV90aGlzJHByb3BzMi5zdHlsZTt2YXIgX29uT2s9ZWRpdEZvcm1Qcm9wcy5vbk9rO3ZhciBsb2FkaW5nPXRoaXMuc3RhdGUubG9hZGluZztyZXR1cm4vKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChfTW9kYWwsT2JqZWN0LmFzc2lnbih7Y2xhc3NOYW1lOmNsYXNzTmFtZSxzdHlsZTpzdHlsZSxtYXNrQ2xvc2FibGU6IWxvYWRpbmd9LG1vZGFsUHJvcHMse3RpdGxlOnRoaXMucmVuZGVyVGl0bGUoKSxkZXN0cm95T25DbG9zZTp0cnVlLHZpc2libGU6dmlzaWJsZSxmb290ZXI6dGhpcy5yZW5kZXJGb290ZXIoKSxvbkNhbmNlbDp0aGlzLmNsb3NlLGNsb3NhYmxlOiFsb2FkaW5nfSksLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdEZvcm0sT2JqZWN0LmFzc2lnbih7cmVmOmZ1bmN0aW9uIHJlZih0YXJnZXQpe2lmKF90aGlzMy5lZGl0Rm9ybSE9PXRhcmdldCl7X3RoaXMzLmVkaXRGb3JtPXRhcmdldDt9fSxvbkxvYWRpbmdDaGFuZ2U6ZnVuY3Rpb24gb25Mb2FkaW5nQ2hhbmdlKGxvYWRpbmcpe190aGlzMy5zZXRTdGF0ZSh7bG9hZGluZzpsb2FkaW5nfSk7fSxoaWRlQ29udHJvbHM6dHJ1ZX0sZWRpdEZvcm1Qcm9wcyx7b25DYW5jZWw6ZnVuY3Rpb24gb25DYW5jZWwoKXtfdGhpczMuY2xvc2UoKTtpZihlZGl0Rm9ybVByb3BzLm9uQ2FuY2VsKXtlZGl0Rm9ybVByb3BzLm9uQ2FuY2VsKCk7fX0sb25PazpmdW5jdGlvbiBvbk9rKCl7X3RoaXMzLmNsb3NlKCk7aWYoX29uT2spe19vbk9rKCk7fX19KSkpO319LHtrZXk6InJlYWRPbmx5IixnZXQ6ZnVuY3Rpb24gZ2V0KCl7dmFyIGVkaXRGb3JtUHJvcHM9dGhpcy5wcm9wcy5lZGl0Rm9ybVByb3BzO3ZhciBzb3VyY2U9ZWRpdEZvcm1Qcm9wcy5zb3VyY2UsdXBkYXRlRnVuY3Rpb249ZWRpdEZvcm1Qcm9wcy51cGRhdGVGdW5jdGlvbjtyZXR1cm4gc291cmNlJiYhdXBkYXRlRnVuY3Rpb247fX1dKTtyZXR1cm4gRWRpdE1vZGFsO30oQ29tcG9uZW50KTtleHBvcnQgZGVmYXVsdCBFZGl0TW9kYWw7aWYodHlwZW9mIEVkaXRNb2RhbCE9PSd1bmRlZmluZWQnJiZFZGl0TW9kYWwmJkVkaXRNb2RhbD09PU9iamVjdChFZGl0TW9kYWwpJiZPYmplY3QuaXNFeHRlbnNpYmxlKEVkaXRNb2RhbCkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShFZGl0TW9kYWwsJ19fZmlsZW1ldGEnLHtlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsdmFsdWU6e25hbWU6IkVkaXRNb2RhbCIsZmlsZW5hbWU6InNyYy9lZGl0TW9kYWwvRWRpdE1vZGFsLnRzeCJ9fSk7fQ=="},{"version":3,"sources":["/Users/xujunjie/Documents/git/projectComponent/src/editModal/EditModal.tsx"],"names":["React","Component","EditForm","EditModal","props","editForm","close","state","loading","editFormProps","renderTitle","source","updateFunction","readOnly","cancel","submit","visible","modalProps","className","style","onOk","renderFooter","target","setState","onCancel"],"mappings":"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","sourcesContent":["import { Button, Modal } from 'antd';\nimport { Store } from 'antd/lib/form/interface';\nimport { ModalProps } from 'antd/lib/modal';\nimport React, { Component, ReactNode } from 'react';\nimport EditForm, { IEditFormProps } from '../editForm/EditForm';\nimport IComponentProps from '../interfaces/IComponentProps';\n\ninterface IEditModalState {\n  loading: boolean;\n}\ninterface IEditModalProps<T> extends IComponentProps {\n  /**\n   * 窗口显示还是隐藏\n   */\n  visible: boolean;\n\n  /**\n   * 关闭Modal的方法，一般是外层页面的`setState({visibleModal: false})`\n   */\n  close: () => void;\n\n  /**\n   * 透传给EditForm的props\n   */\n  editFormProps: IEditFormProps<T>;\n\n  /**\n   * 透传给Modal的props\n   */\n  modalProps?: ModalProps;\n\n  /**\n   * 自定义渲染标题的方法\n   */\n  renderTitle?: () => ReactNode;\n}\n\nclass EditModal<T extends Store> extends Component<IEditModalProps<T>, IEditModalState> {\n  private editForm: EditForm<T> | null = null;\n\n  constructor(props: IEditModalProps<T>) {\n    super(props);\n    this.state = { loading: false };\n  }\n\n  private close = () => {\n    const { close } = this.props;\n    if (close) {\n      close();\n    }\n  };\n\n  private renderTitle() {\n    const { editFormProps, renderTitle } = this.props;\n    if (renderTitle) {\n      return renderTitle();\n    }\n    const { source, updateFunction } = editFormProps;\n    if (!source) {\n      return '新增';\n    } else if (!updateFunction) {\n      return '查看';\n    } else {\n      return '编辑';\n    }\n  }\n\n  private get readOnly() {\n    const { editFormProps } = this.props;\n    const { source, updateFunction } = editFormProps;\n    return source && !updateFunction;\n  }\n\n  private renderFooter() {\n    const { loading } = this.state;\n    if (this.readOnly) {\n      return null;\n    }\n    return (\n      <>\n        <Button\n          disabled={loading}\n          onClick={() => {\n            if (this.editForm) {\n              this.editForm.cancel();\n            }\n          }}\n        >\n          取消\n        </Button>\n        <Button\n          loading={loading}\n          type=\"primary\"\n          onClick={() => {\n            if (this.editForm) {\n              this.editForm.submit();\n            }\n          }}\n        >\n          保存\n        </Button>\n      </>\n    );\n  }\n\n  public render(): ReactNode {\n    const { visible, editFormProps, modalProps, className, style } = this.props;\n    const { onOk } = editFormProps;\n    const { loading } = this.state;\n    return (\n      <Modal\n        className={className}\n        style={style}\n        maskClosable={!loading}\n        {...modalProps}\n        title={this.renderTitle()}\n        destroyOnClose\n        visible={visible}\n        footer={this.renderFooter()}\n        onCancel={this.close}\n        closable={!loading}\n      >\n        <EditForm\n          ref={target => {\n            if (this.editForm !== target) {\n              this.editForm = target;\n            }\n          }}\n          onLoadingChange={loading => {\n            this.setState({ loading });\n          }}\n          hideControls\n          {...editFormProps}\n          onCancel={() => {\n            this.close();\n            if (editFormProps.onCancel) {\n              editFormProps.onCancel();\n            }\n          }}\n          onOk={() => {\n            this.close();\n            if (onOk) {\n              onOk();\n            }\n          }}\n        />\n      </Modal>\n    );\n  }\n}\n\nexport default EditModal;\n"]}]}