{"remainingRequest":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js!/Users/xujunjie/Documents/git/projectComponent/src/TreeCurd/TreeCurd.tsx","dependencies":[{"path":"/Users/xujunjie/Documents/git/projectComponent/src/TreeCurd/TreeCurd.tsx","mtime":1609158887465},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/cache-loader/dist/cjs.js","mtime":1609062632110},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/thread-loader/dist/cjs.js","mtime":1609062632658},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1609062558293},{"path":"/Users/xujunjie/Documents/git/projectComponent/node_modules/source-map-loader/index.js","mtime":1609062632650}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJhbnRkL2VzL3NwaW4vc3R5bGUvY3NzIjsKaW1wb3J0IF9TcGluIGZyb20gImFudGQvZXMvc3BpbiI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImFudGQvZXMvYnV0dG9uL3N0eWxlL2NzcyI7CmltcG9ydCBfQnV0dG9uIGZyb20gImFudGQvZXMvYnV0dG9uIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL1VzZXJzL3h1anVuamllL0RvY3VtZW50cy9naXQvcHJvamVjdENvbXBvbmVudC9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgImFudGQvZXMvaW5wdXQvc3R5bGUvY3NzIjsKaW1wb3J0IF9JbnB1dCBmcm9tICJhbnRkL2VzL2lucHV0IjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L3NyYy9UcmVlQ3VyZC9UcmVlQ3VyZC50c3giOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBDb25maXJtQnV0dG9uIGZyb20gJy4uL2NvbmZpcm1CdXR0b24vQ29uZmlybUJ1dHRvbic7CmltcG9ydCBBbnRkVXRpbCBmcm9tICcuLi91dGlscy9BbnRkVXRpbCc7CmltcG9ydCAnLi9UcmVlQ3VyZC5sZXNzJzsKCnZhciBjbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpOwoKdmFyIFNlYXJjaCA9IF9JbnB1dC5TZWFyY2g7CmV4cG9ydCB2YXIgRWRpdFR5cGU7CgooZnVuY3Rpb24gKEVkaXRUeXBlKSB7CiAgRWRpdFR5cGVbIkFERCJdID0gImFkZCI7CiAgRWRpdFR5cGVbIkVESVQiXSA9ICJlZGl0IjsKICBFZGl0VHlwZVsiREVGQVVMVCJdID0gIiI7Cn0pKEVkaXRUeXBlIHx8IChFZGl0VHlwZSA9IHt9KSk7CgppZiAodHlwZW9mIEVkaXRUeXBlICE9PSAndW5kZWZpbmVkJyAmJiBFZGl0VHlwZSAmJiBFZGl0VHlwZSA9PT0gT2JqZWN0KEVkaXRUeXBlKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKEVkaXRUeXBlKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFZGl0VHlwZSwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkVkaXRUeXBlIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvVHJlZUN1cmQvVHJlZUN1cmQudHN4IgogICAgfQogIH0pOwp9CgovKioKICog5LiA5Liq5Y+v5Lul5aKe5Yig5pS55p+l55qE5qCRCiAqCiAqIEBjbGFzcyBUcmVlQ3VyZAogKiBAZXh0ZW5kcyB7Q29tcG9uZW50PElUcmVlQ3VyZFByb3BzPFQ+LCBJVHJlZUN1cmRTdGF0ZTxUPj59CiAqIEB0ZW1wbGF0ZSBUCiAqLwp2YXIgVHJlZUN1cmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoVHJlZUN1cmQsIF9Db21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFRyZWVDdXJkKTsKCiAgZnVuY3Rpb24gVHJlZUN1cmQoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyZWVDdXJkKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsLmFwcGx5KF9zdXBlciwgW3RoaXNdLmNvbmNhdChhcmdzKSk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGF1dG9FeHBhbmRQYXJlbnQ6IHRydWUsCiAgICAgIHRyZWVEYXRhOiBbXSwKICAgICAgZXhwYW5kZWRLZXlzOiBbXSwKICAgICAgY2hlY2tlZEtleXM6IFtdLAogICAgICBjaGVja2VkSXRlbXM6IFtdLAogICAgICBzZWxlY3RlZEtleXM6IFtdLAogICAgICBzZWxlY3RlZEl0ZW1zOiBbXSwKICAgICAgc2VhcmNoVmFsdWU6ICcnLAogICAgICB0eXBlOiBFZGl0VHlwZS5ERUZBVUxUCiAgICB9OwoKICAgIF90aGlzLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnJlcXVlc3RUcmVlRGF0YSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMoKTsKICAgICAgfSk7CiAgICB9OwoKICAgIF90aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzZWxlY3RlZEtleXMgPSBfdGhpcy5zdGF0ZS5zZWxlY3RlZEtleXM7CiAgICAgIHZhciBzZWxlY3RlZEl0ZW1zID0gW107CiAgICAgIHZhciB0cmVlRGF0YSA9IF90aGlzLnN0YXRlLnRyZWVEYXRhOwoKICAgICAgX3RoaXMuZ2V0SXRlbXNCeUlkcyh0cmVlRGF0YSwgc2VsZWN0ZWRLZXlzLCBzZWxlY3RlZEl0ZW1zKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZEl0ZW1zOiBzZWxlY3RlZEl0ZW1zCiAgICAgIH0pOwogICAgfTsKCiAgICBfdGhpcy5nZXRFeHRyYURhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLAogICAgICAgICAgY2hlY2tlZEtleXMgPSBfdGhpcyRzdGF0ZS5jaGVja2VkS2V5cywKICAgICAgICAgIGNoZWNrZWRJdGVtcyA9IF90aGlzJHN0YXRlLmNoZWNrZWRJdGVtcywKICAgICAgICAgIHNlbGVjdGVkS2V5cyA9IF90aGlzJHN0YXRlLnNlbGVjdGVkS2V5cywKICAgICAgICAgIHNlbGVjdGVkSXRlbXMgPSBfdGhpcyRzdGF0ZS5zZWxlY3RlZEl0ZW1zLAogICAgICAgICAgbG9hZGluZyA9IF90aGlzJHN0YXRlLmxvYWRpbmcsCiAgICAgICAgICB0eXBlID0gX3RoaXMkc3RhdGUudHlwZTsKICAgICAgcmV0dXJuIHsKICAgICAgICBjaGVja2VkS2V5czogY2hlY2tlZEtleXMsCiAgICAgICAgY2hlY2tlZEl0ZW1zOiBjaGVja2VkSXRlbXMsCiAgICAgICAgc2VsZWN0ZWRLZXlzOiBzZWxlY3RlZEtleXMsCiAgICAgICAgc2VsZWN0ZWRJdGVtczogc2VsZWN0ZWRJdGVtcywKICAgICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICAgIHJlZnJlc2g6IF90aGlzLnJlZnJlc2gsCiAgICAgICAgdHlwZTogdHlwZQogICAgICB9OwogICAgfTsKCiAgICBfdGhpcy51cGRhdGVDaGVja2VkSXRlbXMgPSBmdW5jdGlvbiAoY2hlY2tlZEluZm8pIHsKICAgICAgdmFyIGNoZWNrZWRLZXlzID0gX3RoaXMuc3RhdGUuY2hlY2tlZEtleXM7CiAgICAgIHZhciBjaGVja2VkSXRlbXMgPSBbXTsKICAgICAgdmFyIHRyZWVEYXRhID0gX3RoaXMuc3RhdGUudHJlZURhdGE7CgogICAgICBfdGhpcy5nZXRJdGVtc0J5SWRzKHRyZWVEYXRhLCBjaGVja2VkS2V5cywgY2hlY2tlZEl0ZW1zKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBjaGVja2VkSXRlbXM6IGNoZWNrZWRJdGVtcwogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGV4dHJhRGF0YSA9IF90aGlzLmdldEV4dHJhRGF0YSgpOwoKICAgICAgICBpZiAoX3RoaXMucHJvcHMub25DaGVjaykgewogICAgICAgICAgX3RoaXMucHJvcHMub25DaGVjayhleHRyYURhdGEsIGNoZWNrZWRJbmZvKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBfdGhpcy5yZXF1ZXN0VHJlZURhdGEgPSBmdW5jdGlvbiAodHlwZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc29sdmUpIHsKICAgICAgICAgIHZhciBzZWFyY2hWYWx1ZSwgX3RoaXMkcHJvcHMsIGdldFRyZWVEYXRhLCBnZXRLZXksIGRlZmF1bHRFeHBhbmRlZEtleXMsIGRlZmF1bHRDaGVja2VkS2V5cywgcmVzLCBleHBhbmRlZEtleXMsIGNoZWNrZWRLZXlzLCBub2RlMCwgY2hpbGRyZW4sIGtleTsKCiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZSA9IF90aGlzLnN0YXRlLnNlYXJjaFZhbHVlOwogICAgICAgICAgICAgICAgICBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLCBnZXRUcmVlRGF0YSA9IF90aGlzJHByb3BzLmdldFRyZWVEYXRhLCBnZXRLZXkgPSBfdGhpcyRwcm9wcy5nZXRLZXksIGRlZmF1bHRFeHBhbmRlZEtleXMgPSBfdGhpcyRwcm9wcy5kZWZhdWx0RXhwYW5kZWRLZXlzLCBkZWZhdWx0Q2hlY2tlZEtleXMgPSBfdGhpcyRwcm9wcy5kZWZhdWx0Q2hlY2tlZEtleXM7CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRMb2FkaW5nKHRydWUpOwoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRUcmVlRGF0YShzZWFyY2hWYWx1ZSk7CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0TG9hZGluZyhmYWxzZSk7IC8vIOiOt+WPlum7mOiupOWxleW8gOiKgueCuQoKCiAgICAgICAgICAgICAgICAgIGV4cGFuZGVkS2V5cyA9IFtdOwogICAgICAgICAgICAgICAgICBjaGVja2VkS2V5cyA9IFtdOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgbm9kZTAgPSByZXNbMF07CiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcy5nZXROb2RlQ2hpbGRyZW4obm9kZTApOwoKICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBfdGhpcy5nZXRJdGVtS2V5KG5vZGUwKTsKICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkS2V5cyA9IGRlZmF1bHRFeHBhbmRlZEtleXMgJiYgZGVmYXVsdEV4cGFuZGVkS2V5cy5sZW5ndGggPiAwID8gZGVmYXVsdEV4cGFuZGVkS2V5cyA6IFtrZXldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRDaGVja2VkS2V5cykgewogICAgICAgICAgICAgICAgICAgIGNoZWNrZWRLZXlzID0gZGVmYXVsdENoZWNrZWRLZXlzOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgdHJlZURhdGE6IHJlcywKICAgICAgICAgICAgICAgICAgICBleHBhbmRlZEtleXM6IGV4cGFuZGVkS2V5cywKICAgICAgICAgICAgICAgICAgICBjaGVja2VkS2V5czogY2hlY2tlZEtleXMKICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJycpOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfTsKCiAgICBfdGhpcy5nZXRJdGVtc0J5SWRzID0gZnVuY3Rpb24gKHRyZWVEYXRhLCBpZHMsIHNlbGVjdGVkSXRlbXMpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLAogICAgICAgICAgX3RoaXMkcHJvcHMyJGdldEtleSA9IF90aGlzJHByb3BzMi5nZXRLZXksCiAgICAgICAgICBnZXRLZXkgPSBfdGhpcyRwcm9wczIkZ2V0S2V5ID09PSB2b2lkIDAgPyAnaWQnIDogX3RoaXMkcHJvcHMyJGdldEtleSwKICAgICAgICAgIF90aGlzJHByb3BzMiRnZXRDaGlsZCA9IF90aGlzJHByb3BzMi5nZXRDaGlsZHJlbiwKICAgICAgICAgIGdldENoaWxkcmVuID0gX3RoaXMkcHJvcHMyJGdldENoaWxkID09PSB2b2lkIDAgPyAnY2hpbGRyZW4nIDogX3RoaXMkcHJvcHMyJGdldENoaWxkOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBfaXRlbSA9IHRyZWVEYXRhW2ldOwoKICAgICAgICB2YXIga2V5ID0gX3RoaXMuZ2V0SXRlbUtleShfaXRlbSk7CgogICAgICAgIHZhciBjaGlsZHJlbiA9IF90aGlzLmdldE5vZGVDaGlsZHJlbihfaXRlbSk7CgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaWRzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAoa2V5ID09PSBpZHNbal0pIHsKICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5wdXNoKHRyZWVEYXRhW2ldKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChjaGlsZHJlbikgewogICAgICAgICAgX3RoaXMuZ2V0SXRlbXNCeUlkcyhjaGlsZHJlbiwgaWRzLCBzZWxlY3RlZEl0ZW1zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX3RoaXMub25TZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0ZWRLZXlzKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzZWxlY3RlZEtleXM6IHNlbGVjdGVkS2V5cywKICAgICAgICBhdXRvRXhwYW5kUGFyZW50OiBmYWxzZSwKICAgICAgICB0eXBlOiBzZWxlY3RlZEtleXMgJiYgc2VsZWN0ZWRLZXlzLmxlbmd0aCA/IEVkaXRUeXBlLkVESVQgOiBFZGl0VHlwZS5ERUZBVUxUCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zKCk7CiAgICAgIH0pOwogICAgfTsKCiAgICBfdGhpcy5vbkV4cGFuZCA9IGZ1bmN0aW9uIChleHBhbmRlZEtleXMpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGV4cGFuZGVkS2V5czogZXhwYW5kZWRLZXlzCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMucHJvcHMub25FeHBhbmQpIHsKICAgICAgICAgIF90aGlzLnByb3BzLm9uRXhwYW5kKGV4cGFuZGVkS2V5cyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgX3RoaXMub25DaGVjayA9IGZ1bmN0aW9uIChjaGVja2VkS2V5cywgY2hlY2tlZEluZm8pIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGNoZWNrZWRLZXlzOiBjaGVja2VkS2V5cwogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMudXBkYXRlQ2hlY2tlZEl0ZW1zKGNoZWNrZWRJbmZvKTsKICAgICAgfSk7CiAgICB9OwoKICAgIF90aGlzLmRlZmF1bHRSZW5kZXJPcHRJdGVtID0gZnVuY3Rpb24gKGV4dHJhRGF0YSkgewogICAgICB2YXIgc2VsZWN0ZWRLZXlzID0gZXh0cmFEYXRhLnNlbGVjdGVkS2V5cywKICAgICAgICAgIGNoZWNrZWRLZXlzID0gZXh0cmFEYXRhLmNoZWNrZWRLZXlzLAogICAgICAgICAgcmVmcmVzaCA9IGV4dHJhRGF0YS5yZWZyZXNoOwogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBkZWxldGVGdW5jdGlvbiA9IF90aGlzJHByb3BzMy5kZWxldGVGdW5jdGlvbiwKICAgICAgICAgIGNoZWNrYWJsZSA9IF90aGlzJHByb3BzMy5jaGVja2FibGU7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgewogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiAzOTAsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KF9CdXR0b24sIHsKICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHR5cGU6IEVkaXRUeXBlLkFERAogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBfX3NlbGY6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogMzkxLAogICAgICAgICAgY29sdW1uTnVtYmVyOiA5CiAgICAgICAgfQogICAgICB9LCAiXHU2NUIwXHU1ODlFIiksIHNlbGVjdGVkS2V5cyAmJiBzZWxlY3RlZEtleXMubGVuZ3RoID4gMCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb25maXJtQnV0dG9uLCB7CiAgICAgICAgbW9kYWxDb250ZW50OiB7CiAgICAgICAgICB0aXRsZTogJ+i/meS4quaTjeS9nOS4jeWPr+mAhicsCiAgICAgICAgICBjb250ZW50OiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgX19zZWxmOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwKICAgICAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDM5OSwKICAgICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDE3CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICJcdTc4NkVcdTVCOUFcdTg5ODEiLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX19zZWxmOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwKICAgICAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDQwMCwKICAgICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDIyCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICJcdTUyMjBcdTk2NjQiKSwgIlx1OEJFNVx1ODI4Mlx1NzBCOVx1RkYxRiIpCiAgICAgICAgfSwKICAgICAgICBvbkNvbmZpcm06IC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICAgIHZhciBfaWRzOwoKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoIWRlbGV0ZUZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfaWRzID0gY2hlY2thYmxlICE9PSB1bmRlZmluZWQgPyBjaGVja2VkS2V5cyA6IHNlbGVjdGVkS2V5czsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlRnVuY3Rpb24oX2lkcyk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICByZWZyZXNoKCk7CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgfSkpLAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiAzOTUsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhUcmVlQ3VyZCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdGhpcy5yZXF1ZXN0VHJlZURhdGEoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHsKICAgICAgaWYgKHByZXZQcm9wcy5kZWZhdWx0Q2hlY2tlZEtleXMgIT09IHRoaXMucHJvcHMuZGVmYXVsdENoZWNrZWRLZXlzKSB7CiAgICAgICAgdGhpcy5yZXF1ZXN0VHJlZURhdGEoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldExvYWRpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldExvYWRpbmcobG9hZGluZykgewogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBsb2FkaW5nOiBsb2FkaW5nCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE5vZGVDaGlsZHJlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm9kZUNoaWxkcmVuKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzJHByb3BzJGdldENoaWxkciA9IHRoaXMucHJvcHMuZ2V0Q2hpbGRyZW4sCiAgICAgICAgICBnZXRDaGlsZHJlbiA9IF90aGlzJHByb3BzJGdldENoaWxkciA9PT0gdm9pZCAwID8gJ2NoaWxkcmVuJyA6IF90aGlzJHByb3BzJGdldENoaWxkcjsKICAgICAgcmV0dXJuIHR5cGVvZiBnZXRDaGlsZHJlbiA9PT0gJ3N0cmluZycgPyBpdGVtW2dldENoaWxkcmVuXSA6IGdldENoaWxkcmVuKGl0ZW0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEl0ZW1LZXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW1LZXkoaXRlbSkgewogICAgICB2YXIgX3RoaXMkcHJvcHMkZ2V0S2V5ID0gdGhpcy5wcm9wcy5nZXRLZXksCiAgICAgICAgICBnZXRLZXkgPSBfdGhpcyRwcm9wcyRnZXRLZXkgPT09IHZvaWQgMCA/ICdpZCcgOiBfdGhpcyRwcm9wcyRnZXRLZXk7CiAgICAgIHJldHVybiB0eXBlb2YgZ2V0S2V5ID09PSAnc3RyaW5nJyA/IGl0ZW1bZ2V0S2V5XSA6IGdldEtleShpdGVtKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkc3RhdGUyID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGxvYWRpbmcgPSBfdGhpcyRzdGF0ZTIubG9hZGluZywKICAgICAgICAgIHRyZWVEYXRhID0gX3RoaXMkc3RhdGUyLnRyZWVEYXRhLAogICAgICAgICAgZXhwYW5kZWRLZXlzID0gX3RoaXMkc3RhdGUyLmV4cGFuZGVkS2V5cywKICAgICAgICAgIGF1dG9FeHBhbmRQYXJlbnQgPSBfdGhpcyRzdGF0ZTIuYXV0b0V4cGFuZFBhcmVudCwKICAgICAgICAgIGNoZWNrZWRLZXlzID0gX3RoaXMkc3RhdGUyLmNoZWNrZWRLZXlzLAogICAgICAgICAgY2hlY2tlZEl0ZW1zID0gX3RoaXMkc3RhdGUyLmNoZWNrZWRJdGVtcywKICAgICAgICAgIHNlbGVjdGVkS2V5cyA9IF90aGlzJHN0YXRlMi5zZWxlY3RlZEtleXMsCiAgICAgICAgICBzZWxlY3RlZEl0ZW1zID0gX3RoaXMkc3RhdGUyLnNlbGVjdGVkSXRlbXMsCiAgICAgICAgICB0eXBlID0gX3RoaXMkc3RhdGUyLnR5cGU7CiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLAogICAgICAgICAgZ2V0S2V5ID0gX3RoaXMkcHJvcHM0LmdldEtleSwKICAgICAgICAgIGdldFRpdGxlID0gX3RoaXMkcHJvcHM0LmdldFRpdGxlLAogICAgICAgICAgZ2V0Q2hpbGRyZW4gPSBfdGhpcyRwcm9wczQuZ2V0Q2hpbGRyZW4sCiAgICAgICAgICB0cmVlQ29udGVudENsYXNzTmFtZSA9IF90aGlzJHByb3BzNC50cmVlQ29udGVudENsYXNzTmFtZSwKICAgICAgICAgIGVkaXRDb250ZW50Q2xhc3NOYW1lID0gX3RoaXMkcHJvcHM0LmVkaXRDb250ZW50Q2xhc3NOYW1lLAogICAgICAgICAgb3B0Q2xhc3NPTmFtZSA9IF90aGlzJHByb3BzNC5vcHRDbGFzc09OYW1lLAogICAgICAgICAgY2hlY2tDbGFzc05hbWUgPSBfdGhpcyRwcm9wczQuY2hlY2tDbGFzc05hbWUsCiAgICAgICAgICB0cmVlUHJvcHMgPSBfdGhpcyRwcm9wczQudHJlZVByb3BzLAogICAgICAgICAgY2hlY2thYmxlID0gX3RoaXMkcHJvcHM0LmNoZWNrYWJsZSwKICAgICAgICAgIF90aGlzJHByb3BzNCR3aWR0aCA9IF90aGlzJHByb3BzNC53aWR0aCwKICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHM0JHdpZHRoID09PSB2b2lkIDAgPyAyMDAgOiBfdGhpcyRwcm9wczQkd2lkdGgsCiAgICAgICAgICBfdGhpcyRwcm9wczQkbWluSGVpZ2ggPSBfdGhpcyRwcm9wczQubWluSGVpZ2h0LAogICAgICAgICAgbWluSGVpZ2h0ID0gX3RoaXMkcHJvcHM0JG1pbkhlaWdoID09PSB2b2lkIDAgPyAzMDAgOiBfdGhpcyRwcm9wczQkbWluSGVpZ2gsCiAgICAgICAgICByZW5kZXJFeHRyYSA9IF90aGlzJHByb3BzNC5yZW5kZXJFeHRyYSwKICAgICAgICAgIHJlbmRlckVkaXRFeHRyYSA9IF90aGlzJHByb3BzNC5yZW5kZXJFZGl0RXh0cmEsCiAgICAgICAgICByZW5kZXJDaGVja0V4dHJhID0gX3RoaXMkcHJvcHM0LnJlbmRlckNoZWNrRXh0cmEsCiAgICAgICAgICBzaG93U2VhcmNoID0gX3RoaXMkcHJvcHM0LnNob3dTZWFyY2gsCiAgICAgICAgICBnZXROb2RlUHJvcHMgPSBfdGhpcyRwcm9wczQuZ2V0Tm9kZVByb3BzLAogICAgICAgICAgX3RoaXMkcHJvcHM0JGVkaXRFbmFiID0gX3RoaXMkcHJvcHM0LmVkaXRFbmFibGUsCiAgICAgICAgICBlZGl0RW5hYmxlID0gX3RoaXMkcHJvcHM0JGVkaXRFbmFiID09PSB2b2lkIDAgPyB0cnVlIDogX3RoaXMkcHJvcHM0JGVkaXRFbmFiOwogICAgICB2YXIgY2hlY2tQcm9wcyA9IHt9OwoKICAgICAgaWYgKGNoZWNrYWJsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY2hlY2tQcm9wcyA9IHsKICAgICAgICAgIGNoZWNrYWJsZTogdHJ1ZSwKICAgICAgICAgIG9uQ2hlY2s6IHRoaXMub25DaGVjaywKICAgICAgICAgIGNoZWNrZWRLZXlzOiBjaGVja2VkS2V5cwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBUcmVlUHJvcHMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgIGF1dG9FeHBhbmRQYXJlbnQ6IGF1dG9FeHBhbmRQYXJlbnQsCiAgICAgICAgb25TZWxlY3Q6IHRoaXMub25TZWxlY3QsCiAgICAgICAgb25FeHBhbmQ6IHRoaXMub25FeHBhbmQsCiAgICAgICAgZXhwYW5kZWRLZXlzOiBleHBhbmRlZEtleXMKICAgICAgfSwgY2hlY2tQcm9wcyksIHRyZWVQcm9wcyk7CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJUcmVlQ3VyZCIsCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogNDY3LAogICAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NuYW1lcygnb3B0Q29udGVudCcsIG9wdENsYXNzT05hbWUpLAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDQ2OCwKICAgICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICAgIH0KICAgICAgfSwgZWRpdEVuYWJsZSA/IHJlbmRlckV4dHJhID8gcmVuZGVyRXh0cmEodGhpcy5nZXRFeHRyYURhdGEoKSwgdGhpcy5kZWZhdWx0UmVuZGVyT3B0SXRlbSkgOiB0aGlzLmRlZmF1bHRSZW5kZXJPcHRJdGVtKHRoaXMuZ2V0RXh0cmFEYXRhKCkpIDogbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidHJlZUN1cmRDb250ZW50IiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWluSGVpZ2h0OiBtaW5IZWlnaHQKICAgICAgICB9LAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDQ3NSwKICAgICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ3RyZWVDb250ZW50JywgdHJlZUNvbnRlbnRDbGFzc05hbWUpLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aWR0aDogd2lkdGgKICAgICAgICB9LAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDQ3NiwKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgICB9CiAgICAgIH0sIHNob3dTZWFyY2ggIT09IHVuZGVmaW5lZCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtYXJnaW5Cb3R0b206IDIwCiAgICAgICAgfSwKICAgICAgICBfX3NlbGY6IHRoaXMsCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA0NzgsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDE1CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWFyY2gsIHsKICAgICAgICBlbnRlckJ1dHRvbjogdHJ1ZSwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHNlYXJjaFZhbHVlOiBlLnRhcmdldC52YWx1ZQogICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlZnJlc2goKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogNDc5LAogICAgICAgICAgY29sdW1uTnVtYmVyOiAxNwogICAgICAgIH0KICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChfU3BpbiwgewogICAgICAgIHNwaW5uaW5nOiB0aGlzLnByb3BzLmRlZmF1bHRFeHBhbmRlZEtleXMgfHwgdGhpcy5wcm9wcy5kZWZhdWx0Q2hlY2tlZEtleXMgPyBmYWxzZSA6IGxvYWRpbmcsCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogNDg4LAogICAgICAgICAgY29sdW1uTnVtYmVyOiAxMwogICAgICAgIH0KICAgICAgfSwgQW50ZFV0aWwucmVuZGVUcmVlKHRyZWVEYXRhLCBUcmVlUHJvcHMsIGdldEtleSwgZ2V0VGl0bGUsIGdldENoaWxkcmVuLCBnZXROb2RlUHJvcHMpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2NoZWNrQ29udGVudCcsIGNoZWNrQ2xhc3NOYW1lKSwKICAgICAgICBfX3NlbGY6IHRoaXMsCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA1MDIsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDEzCiAgICAgICAgfQogICAgICB9LCBjaGVja2FibGUgIT09IHVuZGVmaW5lZCAmJiByZW5kZXJDaGVja0V4dHJhID8gcmVuZGVyQ2hlY2tFeHRyYSh0aGlzLmdldEV4dHJhRGF0YSgpKSA6IG51bGwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2VkaXRDb250ZW50JywgZWRpdENvbnRlbnRDbGFzc05hbWUpLAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDUwOCwKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgICB9CiAgICAgIH0sIHJlbmRlckVkaXRFeHRyYSAmJiByZW5kZXJFZGl0RXh0cmEodGhpcy5nZXRFeHRyYURhdGEoKSkpKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX19yZWFjdHN0YW5kaW5fX3JlZ2VuZXJhdGVCeUV2YWwiLAogICAgLy8gQHRzLWlnbm9yZQogICAgdmFsdWU6IGZ1bmN0aW9uIF9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsKGtleSwgY29kZSkgewogICAgICAvLyBAdHMtaWdub3JlCiAgICAgIHRoaXNba2V5XSA9IGV2YWwoY29kZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVHJlZUN1cmQ7Cn0oQ29tcG9uZW50KTsKCnZhciBfZGVmYXVsdCA9IFRyZWVDdXJkOwpleHBvcnQgZGVmYXVsdCBfZGVmYXVsdDsKCmlmICh0eXBlb2YgVHJlZUN1cmQgIT09ICd1bmRlZmluZWQnICYmIFRyZWVDdXJkICYmIFRyZWVDdXJkID09PSBPYmplY3QoVHJlZUN1cmQpICYmIE9iamVjdC5pc0V4dGVuc2libGUoVHJlZUN1cmQpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyZWVDdXJkLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiVHJlZUN1cmQiLAogICAgICBmaWxlbmFtZTogInNyYy9UcmVlQ3VyZC9UcmVlQ3VyZC50c3giCiAgICB9CiAgfSk7Cn0KCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQgOiB1bmRlZmluZWQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKFNlYXJjaCwgIlNlYXJjaCIsICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L3NyYy9UcmVlQ3VyZC9UcmVlQ3VyZC50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihUcmVlQ3VyZCwgIlRyZWVDdXJkIiwgIi9Vc2Vycy94dWp1bmppZS9Eb2N1bWVudHMvZ2l0L3Byb2plY3RDb21wb25lbnQvc3JjL1RyZWVDdXJkL1RyZWVDdXJkLnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKF9kZWZhdWx0LCAiZGVmYXVsdCIsICIvVXNlcnMveHVqdW5qaWUvRG9jdW1lbnRzL2dpdC9wcm9qZWN0Q29tcG9uZW50L3NyYy9UcmVlQ3VyZC9UcmVlQ3VyZC50c3giKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["/Users/xujunjie/Documents/git/projectComponent/src/TreeCurd/TreeCurd.tsx"],"names":["React","Component","ConfirmButton","AntdUtil","classnames","require","Search","EditType","TreeCurd","state","loading","autoExpandParent","treeData","expandedKeys","checkedKeys","checkedItems","selectedKeys","selectedItems","searchValue","type","DEFAULT","refresh","requestTreeData","then","updateSelectedItems","getItemsByIds","setState","getExtraData","updateCheckedItems","checkedInfo","extraData","props","onCheck","Promise","resolve","getTreeData","getKey","defaultExpandedKeys","defaultCheckedKeys","setLoading","res","length","node0","children","getNodeChildren","key","getItemKey","ids","getChildren","i","item","j","push","onSelect","EDIT","onExpand","defaultRenderOptItem","deleteFunction","checkable","ADD","title","content","color","undefined","prevProps","getTitle","treeContentClassName","editContentClassName","optClassOName","checkClassName","treeProps","width","minHeight","renderExtra","renderEditExtra","renderCheckExtra","showSearch","getNodeProps","editEnable","checkProps","TreeProps","marginBottom","e","target","value","rendeTree"],"mappings":"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","sourcesContent":["import { Button, Input, Spin } from 'antd';\nimport { DataNode } from 'rc-tree/lib/interface';\nimport React, { Component, ReactNode } from 'react';\nimport ConfirmButton from '../confirmButton/ConfirmButton';\nimport IComponentProps from '../interfaces/IComponentProps';\nimport AntdUtil from '../utils/AntdUtil';\nimport './TreeCurd.less';\n\nconst classnames = require('classnames');\n\nconst { Search } = Input;\n\nexport enum EditType {\n  ADD = 'add',\n  EDIT = 'edit',\n  DEFAULT = '',\n}\n\ninterface ITreeCurdState<T> {\n  loading: boolean;\n  autoExpandParent: boolean;\n  treeData: T[];\n  expandedKeys: any[];\n  selectedKeys: React.ReactText[];\n  selectedItems: T[];\n  checkedKeys: any[];\n  checkedItems: T[];\n  searchValue: string;\n  type: EditType;\n}\n\ninterface ITreeCurdExtra<T> {\n  /**\n   * 选取节点的keys\n   */\n  selectedKeys: React.ReactText[];\n  /**\n   * 选取节点的数据\n   */\n  selectedItems: T[];\n  /**\n   * 多选的节点keys\n   */\n  checkedKeys: any[];\n  /**\n   * 多选节点数据\n   */\n  checkedItems: T[];\n\n  /**\n   *  树加载状态\n   */\n  loading: boolean;\n\n  /**\n   * 刷新\n   */\n  refresh: () => void;\n\n  /**\n   * 操作类型\n   */\n  type?: EditType;\n}\n\n/**\n * 属性\n *\n * @interface ITreeCurdProps\n * @extends {IComponentProps}\n * @template T\n */\ninterface ITreeCurdProps<T> extends IComponentProps {\n  /**\n   * 自定义标识\n   */\n  getKey?: ((item: T) => string) | string;\n\n  /**\n   * 自定义节点名称\n   */\n  getTitle?: ((item: T) => ReactNode) | string;\n\n  /**\n   * 自定义数据子节点集合属性名或者自定义子节点集合\n   */\n  getChildren?: ((item: T) => T[]) | string;\n\n  /**\n   * 选中回调\n   */\n  onCheck?: (\n    extraData: ITreeCurdExtra<T>,\n    checkedInfo: {\n      checkedNodes: DataNode[];\n    },\n  ) => void;\n\n  /**\n   * 展开回调\n   */\n  onExpand?: (expandedKeys: React.ReactText[]) => void;\n\n  /**\n   * 树的宽度\n   */\n  width?: number;\n\n  /**\n   * 是否是一个是否可编辑的树,默认为true\n   */\n  editEnable?: boolean;\n\n  /**\n   * 树最小高度\n   */\n  minHeight?: number;\n\n  /**\n   * 树顶部操作区窗口的样式名\n   */\n  treeContentClassName?: string;\n\n  /**\n   * 编辑顶部操作区窗口的样式名\n   */\n  editContentClassName?: string;\n\n  /**\n   * 操作顶部操作区窗口的样式名\n   */\n  optClassOName?: string;\n\n  /**\n   * 多选顶部操作区窗口的样式名\n   */\n  checkClassName?: string;\n\n  /**\n   *  Tree组件自带的属性\n   */\n  treeProps?: Object;\n\n  /**\n   * 节点前添加 Checkbox 复选框\n   */\n  checkable?: boolean;\n\n  /**\n   * 获取树源数据\n   */\n  getTreeData: (searchValue?: string) => Promise<T[]>;\n\n  /**\n   * 是否可搜索\n   */\n  showSearch?: boolean;\n\n  /**\n   * 删除节点\n   */\n  deleteFunction?: (ids: React.ReactText[]) => Promise<any>;\n\n  /**\n   * 自定义操作\n   */\n  renderExtra?: (\n    extraData: ITreeCurdExtra<T>,\n    defaultRender: (extraData: ITreeCurdExtra<T>) => ReactNode,\n  ) => ReactNode;\n\n  /**\n   * 自定义编辑操作\n   */\n  renderEditExtra?: (extraData: ITreeCurdExtra<T>) => ReactNode;\n\n  /**\n   * 默认展开的节点\n   */\n  defaultExpandedKeys?: any[];\n\n  /**\n   * 默认选中的节点\n   */\n  defaultCheckedKeys?: any[];\n\n  getNodeProps?: (item: T) => DataNode;\n\n  /**\n   *  自定义多选的操作\n   */\n  renderCheckExtra?: (extraData: ITreeCurdExtra<T>) => ReactNode;\n}\n\ninterface TreeInterfaces {\n  [propName: string]: any;\n}\n\n/**\n * 一个可以增删改查的树\n *\n * @class TreeCurd\n * @extends {Component<ITreeCurdProps<T>, ITreeCurdState<T>>}\n * @template T\n */\nclass TreeCurd<T extends TreeInterfaces> extends Component<ITreeCurdProps<T>, ITreeCurdState<T>> {\n  state: ITreeCurdState<T> = {\n    loading: false,\n    autoExpandParent: true,\n    treeData: [],\n    expandedKeys: [],\n    checkedKeys: [],\n    checkedItems: [],\n    selectedKeys: [],\n    selectedItems: [],\n    searchValue: '',\n    type: EditType.DEFAULT,\n  };\n\n  componentDidMount() {\n    this.requestTreeData();\n  }\n\n  private refresh = () => {\n    this.requestTreeData().then(() => {\n      this.updateSelectedItems();\n    });\n  };\n\n  private updateSelectedItems = () => {\n    const { selectedKeys } = this.state;\n    const selectedItems: T[] = [];\n    const { treeData } = this.state;\n    this.getItemsByIds(treeData, selectedKeys, selectedItems);\n    this.setState({\n      selectedItems,\n    });\n  };\n\n  componentDidUpdate(prevProps: ITreeCurdProps<T>) {\n    if (prevProps.defaultCheckedKeys !== this.props.defaultCheckedKeys) {\n      this.requestTreeData();\n    }\n  }\n\n  private getExtraData = () => {\n    const { checkedKeys, checkedItems, selectedKeys, selectedItems, loading, type } = this.state;\n    return {\n      checkedKeys,\n      checkedItems,\n      selectedKeys,\n      selectedItems,\n      loading,\n      refresh: this.refresh,\n      type,\n    };\n  };\n\n  private updateCheckedItems = (checkedInfo: { checkedNodes: DataNode[] }) => {\n    const { checkedKeys } = this.state;\n    const checkedItems: T[] = [];\n    const { treeData } = this.state;\n    this.getItemsByIds(treeData, checkedKeys, checkedItems);\n    this.setState(\n      {\n        checkedItems,\n      },\n      () => {\n        const extraData = this.getExtraData();\n        if (this.props.onCheck) {\n          this.props.onCheck(extraData, checkedInfo);\n        }\n      },\n    );\n  };\n\n  private setLoading(loading: boolean) {\n    this.setState({ loading });\n  }\n\n  private getNodeChildren(item: T) {\n    const { getChildren = 'children' } = this.props;\n    return typeof getChildren === 'string' ? item[getChildren] : getChildren(item);\n  }\n\n  private getItemKey(item: T) {\n    const { getKey = 'id' } = this.props;\n    return typeof getKey === 'string' ? item[getKey] : getKey(item);\n  }\n\n  private requestTreeData = (type?: string) => {\n    return new Promise(async resolve => {\n      const { searchValue } = this.state;\n      const { getTreeData, getKey, defaultExpandedKeys, defaultCheckedKeys } = this.props;\n      this.setLoading(true);\n      const res = await getTreeData(searchValue);\n      this.setLoading(false);\n      // 获取默认展开节点\n      let expandedKeys: string[] = [];\n      let checkedKeys = [];\n      if (res && res.length) {\n        const node0 = res[0];\n        const children = this.getNodeChildren(node0);\n        if (children && children.length) {\n          const key = this.getItemKey(node0);\n          expandedKeys =\n            defaultExpandedKeys && defaultExpandedKeys.length > 0 ? defaultExpandedKeys : [key];\n        }\n      }\n      if (defaultCheckedKeys) {\n        checkedKeys = defaultCheckedKeys;\n      }\n\n      this.setState(\n        {\n          treeData: res,\n          expandedKeys,\n          checkedKeys,\n        },\n        () => {\n          resolve('');\n        },\n      );\n    });\n  };\n\n  private getItemsByIds = (treeData: T[], ids: React.ReactText[], selectedItems: T[]) => {\n    const { getKey = 'id', getChildren = 'children' } = this.props;\n    for (let i = 0; i < treeData.length; i++) {\n      const item = treeData[i];\n      const key = this.getItemKey(item);\n      const children = this.getNodeChildren(item);\n      for (let j = 0; j < ids.length; j++) {\n        if (key === ids[j]) {\n          selectedItems.push(treeData[i]);\n        }\n      }\n      if (children) {\n        this.getItemsByIds(children, ids, selectedItems);\n      }\n    }\n  };\n\n  private onSelect = (selectedKeys: React.ReactText[]) => {\n    this.setState(\n      {\n        selectedKeys,\n        autoExpandParent: false,\n        type: selectedKeys && selectedKeys.length ? EditType.EDIT : EditType.DEFAULT,\n      },\n      () => {\n        this.updateSelectedItems();\n      },\n    );\n  };\n\n  private onExpand = (expandedKeys: React.ReactText[]) => {\n    this.setState(\n      {\n        expandedKeys,\n      },\n      () => {\n        if (this.props.onExpand) {\n          this.props.onExpand(expandedKeys);\n        }\n      },\n    );\n  };\n\n  private onCheck = (\n    checkedKeys: React.ReactText[],\n    checkedInfo: {\n      checkedNodes: DataNode[];\n    },\n  ) => {\n    this.setState(\n      {\n        checkedKeys,\n      },\n      () => {\n        this.updateCheckedItems(checkedInfo);\n      },\n    );\n  };\n\n  private defaultRenderOptItem = (extraData: ITreeCurdExtra<T>) => {\n    const { selectedKeys, checkedKeys, refresh } = extraData;\n    const { deleteFunction, checkable } = this.props;\n    return (\n      <React.Fragment>\n        <Button type=\"primary\" onClick={() => this.setState({ type: EditType.ADD })}>\n          新增\n        </Button>\n        {selectedKeys && selectedKeys.length > 0 && (\n          <ConfirmButton\n            modalContent={{\n              title: '这个操作不可逆',\n              content: (\n                <span>\n                  确定要<span style={{ color: 'red' }}>删除</span>该节点？\n                </span>\n              ),\n            }}\n            onConfirm={async () => {\n              if (deleteFunction) {\n                const ids = checkable !== undefined ? checkedKeys : selectedKeys;\n                await deleteFunction(ids);\n                refresh();\n              }\n            }}\n          />\n        )}\n      </React.Fragment>\n    );\n  };\n\n  public render(): ReactNode {\n    const {\n      loading,\n      treeData,\n      expandedKeys,\n      autoExpandParent,\n      checkedKeys,\n      checkedItems,\n      selectedKeys,\n      selectedItems,\n      type,\n    } = this.state;\n    const {\n      getKey,\n      getTitle,\n      getChildren,\n      treeContentClassName,\n      editContentClassName,\n      optClassOName,\n      checkClassName,\n      treeProps,\n      checkable,\n      width = 200,\n      minHeight = 300,\n      renderExtra,\n      renderEditExtra,\n      renderCheckExtra,\n      showSearch,\n      getNodeProps,\n      editEnable = true,\n    } = this.props;\n    let checkProps = {};\n    if (checkable !== undefined) {\n      checkProps = {\n        checkable: true,\n        onCheck: this.onCheck,\n        checkedKeys,\n      };\n    }\n\n    const TreeProps = {\n      autoExpandParent,\n      onSelect: this.onSelect,\n      onExpand: this.onExpand,\n      expandedKeys,\n      ...checkProps,\n      ...treeProps,\n    };\n\n    return (\n      <div className=\"TreeCurd\">\n        <div className={classnames('optContent', optClassOName)}>\n          {editEnable\n            ? renderExtra\n              ? renderExtra(this.getExtraData(), this.defaultRenderOptItem)\n              : this.defaultRenderOptItem(this.getExtraData())\n            : null}\n        </div>\n        <div className=\"treeCurdContent\" style={{ minHeight }}>\n          <div className={classnames('treeContent', treeContentClassName)} style={{ width }}>\n            {showSearch !== undefined && (\n              <div style={{ marginBottom: 20 }}>\n                <Search\n                  enterButton\n                  onChange={e =>\n                    this.setState({ searchValue: e.target.value }, () => this.refresh())\n                  }\n                />\n              </div>\n            )}\n\n            <Spin\n              spinning={\n                this.props.defaultExpandedKeys || this.props.defaultCheckedKeys ? false : loading\n              }\n            >\n              {AntdUtil.rendeTree<T>(\n                treeData,\n                TreeProps,\n                getKey,\n                getTitle,\n                getChildren,\n                getNodeProps,\n              )}\n            </Spin>\n            <div className={classnames('checkContent', checkClassName)}>\n              {checkable !== undefined && renderCheckExtra\n                ? renderCheckExtra(this.getExtraData())\n                : null}\n            </div>\n          </div>\n          <div className={classnames('editContent', editContentClassName)}>\n            {renderEditExtra && renderEditExtra(this.getExtraData())}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TreeCurd;\n"]}]}